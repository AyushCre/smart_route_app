{"file_contents":{"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/metrics-card.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { LucideIcon } from \"lucide-react\";\nimport { TrendingUp, TrendingDown } from \"lucide-react\";\n\ninterface MetricsCardProps {\n  title: string;\n  value: string | number;\n  icon: LucideIcon;\n  trend?: {\n    value: number;\n    isPositive: boolean;\n  };\n  subtitle?: string;\n}\n\nexport function MetricsCard({ title, value, icon: Icon, trend, subtitle }: MetricsCardProps) {\n  return (\n    <Card data-testid={`metrics-${title.toLowerCase().replace(/\\s+/g, '-')}`}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex-1\">\n            <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n              {title}\n            </p>\n            <div className=\"mt-2 flex items-baseline gap-2\">\n              <h3 className=\"text-3xl font-bold\" data-testid={`value-${title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                {value}\n              </h3>\n              {trend && (\n                <div\n                  className={`flex items-center text-sm font-medium ${\n                    trend.isPositive ? \"text-green-600\" : \"text-red-600\"\n                  }`}\n                >\n                  {trend.isPositive ? (\n                    <TrendingUp className=\"h-4 w-4 mr-1\" />\n                  ) : (\n                    <TrendingDown className=\"h-4 w-4 mr-1\" />\n                  )}\n                  {Math.abs(trend.value)}%\n                </div>\n              )}\n            </div>\n            {subtitle && (\n              <p className=\"mt-1 text-xs text-muted-foreground\">{subtitle}</p>\n            )}\n          </div>\n          <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n            <Icon className=\"h-6 w-6 text-primary\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":1905},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { WebSocketServer, WebSocket } from \"ws\";\nimport { storage, initializeStorage } from \"./storage\";\nimport { optimizeRoute, type Coordinate } from \"./pathfinding\";\nimport {\n  insertVehicleSchema,\n  insertDeliverySchema,\n  insertRouteSchema,\n  insertAlertSchema,\n  insertIotSensorDataSchema,\n} from \"@shared/schema\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  await initializeStorage();\n  app.get(\"/api/metrics\", async (_req, res) => {\n    try {\n      const metrics = await storage.getDashboardMetrics();\n      res.json(metrics);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch metrics\" });\n    }\n  });\n\n  app.get(\"/api/vehicles\", async (req, res) => {\n    try {\n      let vehicles = await storage.getVehicles();\n      \n      // Filtering by status\n      if (req.query.status) {\n        vehicles = vehicles.filter(v => v.status === req.query.status);\n      }\n      \n      // Filtering by vehicle number (search)\n      if (req.query.search) {\n        vehicles = vehicles.filter(v => \n          v.vehicleNumber.toLowerCase().includes((req.query.search as string).toLowerCase())\n        );\n      }\n      \n      res.json(vehicles);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch vehicles\" });\n    }\n  });\n\n  app.get(\"/api/vehicles/active\", async (_req, res) => {\n    try {\n      const vehicles = await storage.getVehicles();\n      const active = vehicles.filter(\n        (v) => v.status === \"in-transit\" || v.status === \"idle\"\n      );\n      res.json(active);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch active vehicles\" });\n    }\n  });\n\n  app.get(\"/api/vehicles/:id\", async (req, res) => {\n    try {\n      const vehicle = await storage.getVehicle(req.params.id);\n      if (!vehicle) {\n        return res.status(404).json({ error: \"Vehicle not found\" });\n      }\n      res.json(vehicle);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch vehicle\" });\n    }\n  });\n\n  app.post(\"/api/vehicles\", async (req, res) => {\n    try {\n      const validatedData = insertVehicleSchema.parse(req.body);\n      const vehicle = await storage.createVehicle(validatedData);\n      res.status(201).json(vehicle);\n    } catch (error: any) {\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid vehicle data\", details: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to create vehicle\" });\n    }\n  });\n\n  app.patch(\"/api/vehicles/:id\", async (req, res) => {\n    try {\n      const vehicle = await storage.updateVehicle(req.params.id, req.body);\n      if (!vehicle) {\n        return res.status(404).json({ error: \"Vehicle not found\" });\n      }\n      res.json(vehicle);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update vehicle\" });\n    }\n  });\n\n  app.get(\"/api/deliveries\", async (req, res) => {\n    try {\n      let deliveries = await storage.getDeliveries();\n      \n      // Filtering by status\n      if (req.query.status) {\n        deliveries = deliveries.filter(d => d.status === req.query.status);\n      }\n      \n      // Filtering by priority\n      if (req.query.priority) {\n        deliveries = deliveries.filter(d => d.priority === req.query.priority);\n      }\n      \n      // Filtering by customer name (search)\n      if (req.query.search) {\n        deliveries = deliveries.filter(d => \n          d.customerName.toLowerCase().includes((req.query.search as string).toLowerCase()) ||\n          d.orderId.toLowerCase().includes((req.query.search as string).toLowerCase())\n        );\n      }\n      \n      res.json(deliveries);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch deliveries\" });\n    }\n  });\n\n  app.get(\"/api/deliveries/active\", async (_req, res) => {\n    try {\n      const deliveries = await storage.getDeliveries();\n      const active = deliveries.filter(\n        (d) => d.status === \"in-transit\" || d.status === \"pending\"\n      );\n      res.json(active);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch active deliveries\" });\n    }\n  });\n\n  app.get(\"/api/deliveries/:id\", async (req, res) => {\n    try {\n      const delivery = await storage.getDelivery(req.params.id);\n      if (!delivery) {\n        return res.status(404).json({ error: \"Delivery not found\" });\n      }\n      res.json(delivery);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch delivery\" });\n    }\n  });\n\n  app.post(\"/api/deliveries\", async (req, res) => {\n    try {\n      let data = { ...req.body };\n      \n      // Set default dates if not provided or empty\n      const now = Date.now();\n      if (!data.scheduledTime || data.scheduledTime === \"\") {\n        data.scheduledTime = new Date(now + 3600000); // 1 hour from now\n      }\n      if (!data.estimatedDeliveryTime || data.estimatedDeliveryTime === \"\") {\n        data.estimatedDeliveryTime = new Date(now + 7200000); // 2 hours from now\n      }\n      \n      console.log(\"Creating delivery with dates:\", { \n        scheduledTime: data.scheduledTime, \n        estimatedDeliveryTime: data.estimatedDeliveryTime \n      });\n      \n      const validatedData = insertDeliverySchema.parse(data);\n      const delivery = await storage.createDelivery(validatedData);\n      \n      console.log(\"Delivery created successfully:\", { \n        orderId: delivery.orderId, \n        status: delivery.status,\n        scheduledTime: delivery.scheduledTime,\n        estimatedDeliveryTime: delivery.estimatedDeliveryTime\n      });\n      \n      res.status(201).json(delivery);\n    } catch (error: any) {\n      console.error(\"Delivery creation error details:\", error);\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid delivery data\", details: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to create delivery\", details: error.message });\n    }\n  });\n\n  app.patch(\"/api/deliveries/:id\", async (req, res) => {\n    try {\n      const delivery = await storage.updateDelivery(req.params.id, req.body);\n      if (!delivery) {\n        return res.status(404).json({ error: \"Delivery not found\" });\n      }\n      res.json(delivery);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update delivery\" });\n    }\n  });\n\n  app.get(\"/api/routes\", async (req, res) => {\n    try {\n      let routes = await storage.getRoutes();\n      \n      // Filtering by status\n      if (req.query.status) {\n        routes = routes.filter(r => r.status === req.query.status);\n      }\n      \n      // Filtering by algorithm\n      if (req.query.algorithm) {\n        routes = routes.filter(r => r.algorithm === req.query.algorithm);\n      }\n      \n      // Filtering by route name (search)\n      if (req.query.search) {\n        routes = routes.filter(r => \n          r.name.toLowerCase().includes((req.query.search as string).toLowerCase())\n        );\n      }\n      \n      res.json(routes);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch routes\" });\n    }\n  });\n\n  app.get(\"/api/routes/active\", async (_req, res) => {\n    try {\n      const routes = await storage.getRoutes();\n      const active = routes.filter((r) => r.status === \"active\");\n      res.json(active);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch active routes\" });\n    }\n  });\n\n  // Diagnostic: Check optimization readiness (MUST be before :id route)\n  app.get(\"/api/routes/status\", async (_req, res) => {\n    try {\n      const deliveries = await storage.getDeliveries();\n      const vehicles = await storage.getVehicles();\n      const routes = await storage.getRoutes();\n      \n      const pending = deliveries.filter(d => d.status === \"pending\").length;\n      const inTransit = deliveries.filter(d => d.status === \"in-transit\").length;\n      const delivered = deliveries.filter(d => d.status === \"delivered\").length;\n      \n      res.json({\n        deliveries: {\n          total: deliveries.length,\n          pending,\n          inTransit,\n          delivered,\n          other: deliveries.length - pending - inTransit - delivered,\n        },\n        vehicles: {\n          total: vehicles.length,\n          idle: vehicles.filter(v => v.status === \"idle\").length,\n          inTransit: vehicles.filter(v => v.status === \"in-transit\").length,\n        },\n        routes: routes.length,\n      });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to get status\" });\n    }\n  });\n\n  app.get(\"/api/routes/:id\", async (req, res) => {\n    try {\n      const route = await storage.getRoute(req.params.id);\n      if (!route) {\n        return res.status(404).json({ error: \"Route not found\" });\n      }\n      res.json(route);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch route\" });\n    }\n  });\n\n  app.post(\"/api/routes\", async (req, res) => {\n    try {\n      const validatedData = insertRouteSchema.parse(req.body);\n      const route = await storage.createRoute(validatedData);\n      res.status(201).json(route);\n    } catch (error: any) {\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid route data\", details: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to create route\" });\n    }\n  });\n\n  app.patch(\"/api/routes/:id\", async (req, res) => {\n    try {\n      const route = await storage.updateRoute(req.params.id, req.body);\n      if (!route) {\n        return res.status(404).json({ error: \"Route not found\" });\n      }\n      res.json(route);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update route\" });\n    }\n  });\n\n  app.post(\"/api/routes/optimize\", async (req, res) => {\n    try {\n      const { waypoints, algorithm } = req.body;\n      if (!waypoints || !Array.isArray(waypoints)) {\n        return res.status(400).json({ error: \"Waypoints array is required\" });\n      }\n      \n      const coordinates: Coordinate[] = waypoints.map((w: any) => ({\n        lat: w.lat || w.latitude,\n        lng: w.lng || w.longitude,\n        address: w.address,\n      }));\n\n      const optimization = optimizeRoute(\n        coordinates,\n        (algorithm || \"dijkstra\") as \"dijkstra\" | \"astar\"\n      );\n\n      res.json(optimization);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to optimize route\" });\n    }\n  });\n\n  // Auto-optimize pending deliveries\n  app.post(\"/api/routes/optimize-all\", async (req, res) => {\n    try {\n      const deliveries = await storage.getDeliveries();\n      const vehicles = await storage.getVehicles();\n      const pendingDeliveries = deliveries.filter((d) => d.status === \"pending\");\n\n      console.log(`Optimize request: ${deliveries.length} total deliveries, ${pendingDeliveries.length} pending, ${vehicles.length} vehicles`);\n\n      if (pendingDeliveries.length === 0) {\n        console.log(\"No pending deliveries found\");\n        return res.json({ message: \"No pending deliveries\", routes: [], deliveriesAssigned: 0 });\n      }\n\n      const createdRoutes = [];\n\n      // Simple round-robin assignment: assign pending deliveries to vehicles\n      for (let i = 0; i < vehicles.length && i < pendingDeliveries.length; i++) {\n        const vehicle = vehicles[i];\n        const batchSize = Math.ceil(pendingDeliveries.length / vehicles.length);\n        const start = i * batchSize;\n        const end = Math.min(start + batchSize, pendingDeliveries.length);\n        const assignedDeliveries = pendingDeliveries.slice(start, end);\n\n        if (assignedDeliveries.length === 0) continue;\n\n        // Build waypoints: start from vehicle location, then all delivery points\n        const waypoints: Coordinate[] = [\n          {\n            lat: vehicle.latitude,\n            lng: vehicle.longitude,\n            address: `Vehicle Start (${vehicle.vehicleNumber})`,\n          },\n          ...assignedDeliveries.map((d) => ({\n            lat: d.deliveryLat,\n            lng: d.deliveryLng,\n            address: d.deliveryAddress,\n          })),\n        ];\n\n        // Optimize the route\n        const optimization = optimizeRoute(waypoints, \"dijkstra\");\n\n        // Create the route\n        const route = await storage.createRoute({\n          name: `Route-${vehicle.vehicleNumber}-${Date.now()}`,\n          vehicleId: vehicle._id,\n          algorithm: \"dijkstra\",\n          status: \"active\",\n          totalDistance: optimization.totalDistance,\n          estimatedDuration: optimization.estimatedDuration,\n          estimatedCost: optimization.totalDistance * 0.5, // $0.50 per km\n          waypoints: JSON.stringify(waypoints),\n          pathCoordinates: JSON.stringify(optimization.coordinates),\n        });\n\n        // Update deliveries with route assignment\n        for (const delivery of assignedDeliveries) {\n          await storage.updateDelivery(delivery.id, {\n            status: \"in-transit\",\n            vehicleId: vehicle._id,\n            routeId: route.id,\n          });\n        }\n\n        // Update vehicle status\n        await storage.updateVehicle(vehicle._id, {\n          status: \"in-transit\",\n          currentRouteId: route.id,\n          routeCompletion: 0,\n        });\n\n        createdRoutes.push(route);\n      }\n\n      console.log(`Optimization complete: Created ${createdRoutes.length} routes for ${pendingDeliveries.length} deliveries`);\n      res.json({\n        message: \"Routes optimized successfully\",\n        routes: createdRoutes,\n        deliveriesAssigned: pendingDeliveries.length,\n      });\n    } catch (error: any) {\n      console.error(\"Route optimization error:\", error);\n      res.status(500).json({ error: \"Failed to optimize routes\", details: error.message });\n    }\n  });\n\n  app.get(\"/api/alerts\", async (_req, res) => {\n    try {\n      const alerts = await storage.getAlerts();\n      res.json(alerts);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch alerts\" });\n    }\n  });\n\n  app.get(\"/api/alerts/recent\", async (_req, res) => {\n    try {\n      const alerts = await storage.getAlerts();\n      res.json(alerts.slice(0, 5));\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch recent alerts\" });\n    }\n  });\n\n  app.get(\"/api/alerts/:id\", async (req, res) => {\n    try {\n      const alert = await storage.getAlert(req.params.id);\n      if (!alert) {\n        return res.status(404).json({ error: \"Alert not found\" });\n      }\n      res.json(alert);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch alert\" });\n    }\n  });\n\n  app.post(\"/api/alerts\", async (req, res) => {\n    try {\n      const validatedData = insertAlertSchema.parse(req.body);\n      const alert = await storage.createAlert(validatedData);\n      res.status(201).json(alert);\n    } catch (error: any) {\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid alert data\", details: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to create alert\" });\n    }\n  });\n\n  app.patch(\"/api/alerts/:id/read\", async (req, res) => {\n    try {\n      await storage.markAlertAsRead(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to mark alert as read\" });\n    }\n  });\n\n  app.patch(\"/api/alerts/mark-all-read\", async (_req, res) => {\n    try {\n      const alerts = await storage.getAlerts();\n      let count = 0;\n      for (const alert of alerts) {\n        if (!alert.isRead) {\n          await storage.markAlertAsRead(alert._id);\n          count++;\n        }\n      }\n      res.json({ success: true, count });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to mark all alerts as read\" });\n    }\n  });\n\n  app.delete(\"/api/alerts/:id\", async (req, res) => {\n    try {\n      const alert = await storage.getAlert(req.params.id);\n      if (!alert) {\n        return res.status(404).json({ error: \"Alert not found\" });\n      }\n      await storage.deleteAlert(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete alert\" });\n    }\n  });\n\n  app.get(\"/api/iot/sensors\", async (_req, res) => {\n    try {\n      const sensorData = await storage.getIotSensorData();\n      res.json(sensorData);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch IoT sensor data\" });\n    }\n  });\n\n  app.post(\"/api/iot/sensors\", async (req, res) => {\n    try {\n      const validatedData = insertIotSensorDataSchema.parse(req.body);\n      const sensorData = await storage.createIotSensorData(validatedData);\n      res.status(201).json(sensorData);\n    } catch (error: any) {\n      if (error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid sensor data\", details: error.errors });\n      }\n      res.status(500).json({ error: \"Failed to create IoT sensor data\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  const wss = new WebSocketServer({ server: httpServer, path: \"/ws\" });\n\n  // Track vehicle progress along routes\n  const vehicleProgress: Map<string, number> = new Map();\n\n  wss.on(\"connection\", (ws: WebSocket) => {\n    console.log(\"WebSocket client connected\");\n\n    const sendVehicleUpdates = async () => {\n      const vehicles = await storage.getVehicles();\n      \n      for (const vehicle of vehicles) {\n        if (vehicle.status === \"in-transit\" && vehicle.currentRouteId) {\n          const route = await storage.getRoute(vehicle.currentRouteId);\n          if (!route) continue;\n\n          try {\n            const pathCoordinates = JSON.parse(route.pathCoordinates) as [number, number][];\n            if (pathCoordinates.length < 2) continue;\n\n            // Get current progress (0-1)\n            let progress = vehicleProgress.get(vehicle._id) || 0;\n            const stepSize = 0.05; // Move 5% along the route per update\n            progress = Math.min(1, progress + stepSize);\n            vehicleProgress.set(vehicle._id, progress);\n\n            // Calculate current position along path using linear interpolation\n            const totalPoints = pathCoordinates.length;\n            const currentSegmentIndex = Math.floor(progress * (totalPoints - 1));\n            const nextSegmentIndex = Math.min(currentSegmentIndex + 1, totalPoints - 1);\n            const segmentProgress = (progress * (totalPoints - 1)) - currentSegmentIndex;\n\n            const [currentLat, currentLng] = pathCoordinates[currentSegmentIndex];\n            const [nextLat, nextLng] = pathCoordinates[nextSegmentIndex];\n\n            const newLat = currentLat + (nextLat - currentLat) * segmentProgress;\n            const newLng = currentLng + (nextLng - currentLng) * segmentProgress;\n\n            // Calculate speed based on progress\n            const speed = progress < 0.9 ? 45 : 0;\n            const routeCompletion = progress * 100;\n\n            // Mark route as completed when done (but NOT deliveries - they complete separately)\n            let newStatus = \"in-transit\";\n            if (progress >= 1) {\n              newStatus = \"idle\";\n              vehicleProgress.delete(vehicle._id);\n              \n              // Update route status\n              await storage.updateRoute(vehicle.currentRouteId, { status: \"completed\" });\n              \n              // NOTE: Deliveries are NOT auto-completed when route completes\n              // They transition to \"delivered\" only when manually marked in the system\n              // Routes are just the planned paths, deliveries are the actual delivery events\n            }\n\n            await storage.updateVehicle(vehicle._id, {\n              latitude: newLat,\n              longitude: newLng,\n              speed: speed,\n              status: newStatus,\n              routeCompletion: routeCompletion,\n              fuelLevel: Math.max(0, vehicle.fuelLevel - Math.random() * 0.3),\n            });\n\n            const updatedVehicle = await storage.getVehicle(vehicle._id);\n            if (updatedVehicle && ws.readyState === WebSocket.OPEN) {\n              ws.send(\n                JSON.stringify({\n                  type: \"vehicle_update\",\n                  data: updatedVehicle,\n                })\n              );\n            }\n          } catch (err) {\n            console.error(\"Error updating vehicle position:\", err);\n          }\n        }\n      }\n    };\n\n    const updateInterval = setInterval(sendVehicleUpdates, 3000);\n\n    ws.on(\"close\", () => {\n      console.log(\"WebSocket client disconnected\");\n      clearInterval(updateInterval);\n    });\n\n    ws.on(\"error\", (error) => {\n      console.error(\"WebSocket error:\", error);\n      clearInterval(updateInterval);\n    });\n  });\n\n  return httpServer;\n}\n","size_bytes":20673},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"server/storage.ts":{"content":"import {\n  type User,\n  type InsertUser,\n  type Vehicle,\n  type InsertVehicle,\n  type Delivery,\n  type InsertDelivery,\n  type Route,\n  type InsertRoute,\n  type Alert,\n  type InsertAlert,\n  type IotSensorData,\n  type InsertIotSensorData,\n  type DashboardMetrics,\n  insertVehicleSchema,\n  insertDeliverySchema,\n  insertRouteSchema,\n  insertAlertSchema,\n  insertIotSensorDataSchema,\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { MongoClient, ObjectId, Db, Collection } from \"mongodb\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  getVehicles(): Promise<Vehicle[]>;\n  getVehicle(id: string): Promise<Vehicle | undefined>;\n  createVehicle(vehicle: InsertVehicle): Promise<Vehicle>;\n  updateVehicle(id: string, vehicle: Partial<Vehicle>): Promise<Vehicle | undefined>;\n  \n  getDeliveries(): Promise<Delivery[]>;\n  getDelivery(id: string): Promise<Delivery | undefined>;\n  createDelivery(delivery: InsertDelivery): Promise<Delivery>;\n  updateDelivery(id: string, delivery: Partial<Delivery>): Promise<Delivery | undefined>;\n  \n  getRoutes(): Promise<Route[]>;\n  getRoute(id: string): Promise<Route | undefined>;\n  createRoute(route: InsertRoute): Promise<Route>;\n  updateRoute(id: string, route: Partial<Route>): Promise<Route | undefined>;\n  \n  getAlerts(): Promise<Alert[]>;\n  getAlert(id: string): Promise<Alert | undefined>;\n  createAlert(alert: InsertAlert): Promise<Alert>;\n  updateAlert(id: string, alert: Partial<Alert>): Promise<Alert | undefined>;\n  markAlertAsRead(id: string): Promise<void>;\n  deleteAlert(id: string): Promise<void>;\n  \n  getIotSensorData(): Promise<IotSensorData[]>;\n  createIotSensorData(data: InsertIotSensorData): Promise<IotSensorData>;\n  \n  getDashboardMetrics(): Promise<DashboardMetrics>;\n}\n\nexport class DbStorage implements IStorage {\n  private usersCollection: Collection<any>;\n  private vehiclesCollection: Collection<any>;\n  private deliveriesCollection: Collection<any>;\n  private routesCollection: Collection<any>;\n  private alertsCollection: Collection<any>;\n  private sensorDataCollection: Collection<any>;\n\n  constructor(db: Db) {\n    this.usersCollection = db.collection(\"users\");\n    this.vehiclesCollection = db.collection(\"vehicles\");\n    this.deliveriesCollection = db.collection(\"deliveries\");\n    this.routesCollection = db.collection(\"routes\");\n    this.alertsCollection = db.collection(\"alerts\");\n    this.sensorDataCollection = db.collection(\"iot_sensor_data\");\n  }\n\n  async seedIfEmpty(): Promise<void> {\n    const vehicleCount = await this.vehiclesCollection.countDocuments();\n    if (vehicleCount > 0) return;\n    \n    const memStorage = new MemStorage();\n    const vehicleList = await memStorage.getVehicles();\n    const deliveryList = await memStorage.getDeliveries();\n    const routeList = await memStorage.getRoutes();\n    const alertList = await memStorage.getAlerts();\n    const sensorList = await memStorage.getIotSensorData();\n\n    if (vehicleList.length > 0) {\n      const vehicles = vehicleList.map(v => {\n        const { ...doc } = v;\n        return doc;\n      });\n      await this.vehiclesCollection.insertMany(vehicles);\n    }\n\n    if (deliveryList.length > 0) {\n      const deliveries = deliveryList.map(d => {\n        const { ...doc } = d;\n        return doc;\n      });\n      await this.deliveriesCollection.insertMany(deliveries);\n    }\n\n    if (routeList.length > 0) {\n      const routes = routeList.map(r => {\n        const { ...doc } = r;\n        return doc;\n      });\n      await this.routesCollection.insertMany(routes);\n    }\n\n    if (alertList.length > 0) {\n      const alerts = alertList.map(a => {\n        const { ...doc } = a;\n        return doc;\n      });\n      await this.alertsCollection.insertMany(alerts);\n    }\n\n    if (sensorList.length > 0) {\n      const sensors = sensorList.map(s => {\n        const { ...doc } = s;\n        return doc;\n      });\n      await this.sensorDataCollection.insertMany(sensors);\n    }\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.usersCollection.findOne({ _id: id });\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return this.usersCollection.findOne({ username });\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const user = { _id: randomUUID(), ...insertUser };\n    await this.usersCollection.insertOne(user);\n    return user as User;\n  }\n\n  async getVehicles(): Promise<Vehicle[]> {\n    return this.vehiclesCollection.find({}).toArray();\n  }\n\n  async getVehicle(id: string): Promise<Vehicle | undefined> {\n    return this.vehiclesCollection.findOne({ _id: id });\n  }\n\n  async createVehicle(insertVehicle: InsertVehicle): Promise<Vehicle> {\n    const vehicle = { _id: randomUUID(), ...insertVehicle, lastUpdate: new Date() };\n    await this.vehiclesCollection.insertOne(vehicle);\n    return vehicle as Vehicle;\n  }\n\n  async updateVehicle(id: string, update: Partial<Vehicle>): Promise<Vehicle | undefined> {\n    const result = await this.vehiclesCollection.findOneAndUpdate(\n      { _id: id },\n      { $set: { ...update, lastUpdate: new Date() } },\n      { returnDocument: \"after\" }\n    );\n    return result.value;\n  }\n\n  async getDeliveries(): Promise<Delivery[]> {\n    return this.deliveriesCollection.find({}).toArray();\n  }\n\n  async getDelivery(id: string): Promise<Delivery | undefined> {\n    return this.deliveriesCollection.findOne({ _id: id });\n  }\n\n  async createDelivery(insertDelivery: InsertDelivery): Promise<Delivery> {\n    const delivery = { _id: randomUUID(), ...insertDelivery, createdAt: new Date() };\n    await this.deliveriesCollection.insertOne(delivery);\n    return delivery as Delivery;\n  }\n\n  async updateDelivery(id: string, update: Partial<Delivery>): Promise<Delivery | undefined> {\n    const result = await this.deliveriesCollection.findOneAndUpdate(\n      { _id: id },\n      { $set: update },\n      { returnDocument: \"after\" }\n    );\n    return result.value;\n  }\n\n  async getRoutes(): Promise<Route[]> {\n    return this.routesCollection.find({}).toArray();\n  }\n\n  async getRoute(id: string): Promise<Route | undefined> {\n    return this.routesCollection.findOne({ _id: id });\n  }\n\n  async createRoute(insertRoute: InsertRoute): Promise<Route> {\n    const route = { _id: randomUUID(), ...insertRoute, createdAt: new Date() };\n    await this.routesCollection.insertOne(route);\n    return route as Route;\n  }\n\n  async updateRoute(id: string, update: Partial<Route>): Promise<Route | undefined> {\n    const result = await this.routesCollection.findOneAndUpdate(\n      { _id: id },\n      { $set: update },\n      { returnDocument: \"after\" }\n    );\n    return result.value;\n  }\n\n  async getAlerts(): Promise<Alert[]> {\n    return this.alertsCollection.find({}).toArray();\n  }\n\n  async getAlert(id: string): Promise<Alert | undefined> {\n    return this.alertsCollection.findOne({ _id: id });\n  }\n\n  async createAlert(insertAlert: InsertAlert): Promise<Alert> {\n    const alert = { _id: randomUUID(), ...insertAlert, createdAt: new Date() };\n    await this.alertsCollection.insertOne(alert);\n    return alert as Alert;\n  }\n\n  async updateAlert(id: string, update: Partial<Alert>): Promise<Alert | undefined> {\n    const result = await this.alertsCollection.findOneAndUpdate(\n      { _id: id },\n      { $set: update },\n      { returnDocument: \"after\" }\n    );\n    return result.value;\n  }\n\n  async markAlertAsRead(id: string): Promise<void> {\n    await this.alertsCollection.updateOne({ _id: id }, { $set: { isRead: true } });\n  }\n\n  async deleteAlert(id: string): Promise<void> {\n    await this.alertsCollection.deleteOne({ _id: id });\n  }\n\n  async getIotSensorData(): Promise<IotSensorData[]> {\n    return this.sensorDataCollection.find({}).toArray();\n  }\n\n  async createIotSensorData(insertData: InsertIotSensorData): Promise<IotSensorData> {\n    const data = { _id: randomUUID(), ...insertData, timestamp: new Date() };\n    await this.sensorDataCollection.insertOne(data);\n    return data as IotSensorData;\n  }\n\n  async getDashboardMetrics(): Promise<DashboardMetrics> {\n    const deliveries = await this.deliveriesCollection.find({}).toArray();\n    const vehicles = await this.vehiclesCollection.find({}).toArray();\n    const alerts = await this.alertsCollection.find({}).toArray();\n\n    const activeDeliveries = deliveries.filter(d => d.status === \"in-transit\").length;\n    const completedToday = deliveries.filter(d => {\n      const createdDate = new Date(d.createdAt);\n      const today = new Date();\n      return d.status === \"delivered\" && createdDate.toDateString() === today.toDateString();\n    }).length;\n    const activeVehicles = vehicles.filter(v => v.status !== \"idle\").length;\n    const pendingAlerts = alerts.filter(a => !a.isRead).length;\n\n    const avgDeliveryTime = deliveries.length > 0\n      ? deliveries.reduce((sum, d) => {\n          if (d.actualDeliveryTime && d.createdAt) {\n            return sum + (new Date(d.actualDeliveryTime).getTime() - new Date(d.createdAt).getTime());\n          }\n          return sum;\n        }, 0) / deliveries.length / (1000 * 60)\n      : 0;\n\n    const onTimePercentage = deliveries.length > 0\n      ? (deliveries.filter(d => {\n          if (d.actualDeliveryTime && d.estimatedDeliveryTime) {\n            return new Date(d.actualDeliveryTime) <= new Date(d.estimatedDeliveryTime);\n          }\n          return false;\n        }).length / deliveries.length) * 100\n      : 0;\n\n    const totalRevenue = deliveries.reduce((sum, d) => sum + (Math.random() * 1000), 0);\n    const routeEfficiency = activeVehicles > 0 ? (activeDeliveries / activeVehicles) * 100 : 0;\n\n    return {\n      activeDeliveries,\n      completedToday,\n      activeVehicles,\n      averageDeliveryTime: Math.round(avgDeliveryTime),\n      onTimePercentage: Math.round(onTimePercentage),\n      totalRevenue: Math.round(totalRevenue),\n      pendingAlerts,\n      routeEfficiency: Math.round(routeEfficiency),\n    };\n  }\n}\n\nexport class MemStorage implements IStorage {\n  private users: User[] = [];\n  private vehicles: Vehicle[] = [];\n  private deliveries: Delivery[] = [];\n  private routes: Route[] = [];\n  private alerts: Alert[] = [];\n  private sensorData: IotSensorData[] = [];\n\n  constructor() {\n    this.initializeData();\n  }\n\n  private initializeData() {\n    // Seed initial data\n    const now = new Date();\n    const odishaCoords = [\n      { lat: 22.2369, lng: 84.8549, name: \"Rourkela\" },\n      { lat: 20.5244, lng: 85.8830, name: \"Cuttack\" },\n      { lat: 19.8135, lng: 85.2055, name: \"Bhubaneswar\" },\n    ];\n\n    // Create 15 vehicles\n    for (let i = 0; i < 15; i++) {\n      const coord = odishaCoords[i % odishaCoords.length];\n      this.vehicles.push({\n        _id: randomUUID(),\n        vehicleNumber: `VH-${1000 + i}`,\n        driverName: [\"Rohan Desai\", \"Aditya Kumar\", \"Bhavesh Patel\", \"Anjan Nair\", \"Mohan Singh\"][i % 5],\n        driverId: undefined,\n        status: i % 3 === 0 ? \"in-transit\" : \"idle\",\n        latitude: coord.lat + Math.random() * 0.1,\n        longitude: coord.lng + Math.random() * 0.1,\n        speed: i % 3 === 0 ? Math.random() * 80 : 0,\n        fuelLevel: 50 + Math.random() * 50,\n        temperature: 35 + Math.random() * 10,\n        currentRouteId: undefined,\n        routeCompletion: i % 3 === 0 ? Math.random() * 100 : 0,\n        lastUpdate: new Date(),\n      });\n    }\n\n    // Create 30 deliveries\n    const cities = [\n      { lat: 22.2369, lng: 84.8549, name: \"Rourkela\" },\n      { lat: 24.7955, lng: 84.9994, name: \"Gaya\" },\n      { lat: 25.5941, lng: 85.1376, name: \"Patna\" },\n      { lat: 20.5244, lng: 85.8830, name: \"Cuttack\" },\n      { lat: 19.8135, lng: 85.2055, name: \"Bhubaneswar\" },\n    ];\n\n    for (let i = 0; i < 30; i++) {\n      const pickup = cities[i % cities.length];\n      const delivery = cities[(i + 1) % cities.length];\n      const orderId = `ORD-${10000 + i}`;\n      \n      const scheduledTime = new Date(now.getTime() + (i * 60 * 60 * 1000));\n      const estimatedDeliveryTime = new Date(scheduledTime.getTime() + (3 * 60 * 60 * 1000));\n\n      this.deliveries.push({\n        _id: randomUUID(),\n        orderId,\n        status: [\"pending\", \"in-transit\", \"delivered\"][i % 3],\n        customerId: `CUST-${i}`,\n        customerName: [\"Odisha Trading Corp\", \"Prime Delivery\", \"Star Logistics\", \"Direct Shipping\", \"Fast Track Delivery\"][i % 5],\n        pickupAddress: `${1000 + i} ${pickup.name} Market, Odisha`,\n        pickupLat: pickup.lat,\n        pickupLng: pickup.lng,\n        deliveryAddress: `${2000 + i} ${delivery.name} Main Road, Odisha`,\n        deliveryLat: delivery.lat,\n        deliveryLng: delivery.lng,\n        vehicleId: i < 15 ? this.vehicles[i]._id : undefined,\n        routeId: undefined,\n        scheduledTime,\n        estimatedDeliveryTime,\n        actualDeliveryTime: i % 3 === 2 ? new Date(estimatedDeliveryTime.getTime() - Math.random() * 2 * 60 * 60 * 1000) : undefined,\n        priority: [\"high\", \"normal\", \"low\"][i % 3],\n        packageWeight: 5 + Math.random() * 20,\n        createdAt: new Date(now.getTime() - Math.random() * 7 * 24 * 60 * 60 * 1000),\n      });\n    }\n\n    // Create 6 alerts\n    for (let i = 0; i < 6; i++) {\n      this.alerts.push({\n        _id: randomUUID(),\n        type: [\"delivery_delay\", \"fuel_low\", \"maintenance_required\"][i % 3],\n        severity: [\"info\", \"warning\", \"critical\"][i % 3],\n        message: `Alert for vehicle ${this.vehicles[i].vehicleNumber}: ${[\"Delivery delayed\", \"Fuel level low\", \"Maintenance required\"][i % 3]}`,\n        vehicleId: this.vehicles[i]._id,\n        deliveryId: undefined,\n        routeId: undefined,\n        isRead: i % 2 === 0,\n        metadata: undefined,\n        createdAt: new Date(now.getTime() - Math.random() * 60 * 60 * 1000),\n      });\n    }\n\n    // Create 15 sensor readings\n    for (let i = 0; i < 15; i++) {\n      this.sensorData.push({\n        _id: randomUUID(),\n        deviceId: `DEV-${1000 + i}`,\n        vehicleId: this.vehicles[i]._id,\n        latitude: this.vehicles[i].latitude,\n        longitude: this.vehicles[i].longitude,\n        speed: this.vehicles[i].speed,\n        fuelLevel: this.vehicles[i].fuelLevel,\n        temperature: this.vehicles[i].temperature,\n        engineStatus: this.vehicles[i].status === \"idle\" ? \"idle\" : \"running\",\n        connectionStatus: Math.random() > 0.2 ? \"connected\" : \"unstable\",\n        timestamp: new Date(),\n      });\n    }\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.find(u => u._id === id);\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return this.users.find(u => u.username === username);\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const user = { _id: randomUUID(), ...insertUser };\n    this.users.push(user);\n    return user;\n  }\n\n  async getVehicles(): Promise<Vehicle[]> {\n    return this.vehicles;\n  }\n\n  async getVehicle(id: string): Promise<Vehicle | undefined> {\n    return this.vehicles.find(v => v._id === id);\n  }\n\n  async createVehicle(insertVehicle: InsertVehicle): Promise<Vehicle> {\n    const vehicle = { _id: randomUUID(), ...insertVehicle, lastUpdate: new Date() };\n    this.vehicles.push(vehicle);\n    return vehicle;\n  }\n\n  async updateVehicle(id: string, update: Partial<Vehicle>): Promise<Vehicle | undefined> {\n    const vehicle = this.vehicles.find(v => v._id === id);\n    if (!vehicle) return undefined;\n    Object.assign(vehicle, { ...update, lastUpdate: new Date() });\n    return vehicle;\n  }\n\n  async getDeliveries(): Promise<Delivery[]> {\n    return this.deliveries;\n  }\n\n  async getDelivery(id: string): Promise<Delivery | undefined> {\n    return this.deliveries.find(d => d._id === id);\n  }\n\n  async createDelivery(insertDelivery: InsertDelivery): Promise<Delivery> {\n    const delivery = { _id: randomUUID(), ...insertDelivery, createdAt: new Date() };\n    this.deliveries.push(delivery);\n    return delivery;\n  }\n\n  async updateDelivery(id: string, update: Partial<Delivery>): Promise<Delivery | undefined> {\n    const delivery = this.deliveries.find(d => d._id === id);\n    if (!delivery) return undefined;\n    Object.assign(delivery, update);\n    return delivery;\n  }\n\n  async getRoutes(): Promise<Route[]> {\n    return this.routes;\n  }\n\n  async getRoute(id: string): Promise<Route | undefined> {\n    return this.routes.find(r => r._id === id);\n  }\n\n  async createRoute(insertRoute: InsertRoute): Promise<Route> {\n    const route = { _id: randomUUID(), ...insertRoute, createdAt: new Date() };\n    this.routes.push(route);\n    return route;\n  }\n\n  async updateRoute(id: string, update: Partial<Route>): Promise<Route | undefined> {\n    const route = this.routes.find(r => r._id === id);\n    if (!route) return undefined;\n    Object.assign(route, update);\n    return route;\n  }\n\n  async getAlerts(): Promise<Alert[]> {\n    return this.alerts;\n  }\n\n  async getAlert(id: string): Promise<Alert | undefined> {\n    return this.alerts.find(a => a._id === id);\n  }\n\n  async createAlert(insertAlert: InsertAlert): Promise<Alert> {\n    const alert = { _id: randomUUID(), ...insertAlert, createdAt: new Date() };\n    this.alerts.push(alert);\n    return alert;\n  }\n\n  async updateAlert(id: string, update: Partial<Alert>): Promise<Alert | undefined> {\n    const alert = this.alerts.find(a => a._id === id);\n    if (!alert) return undefined;\n    Object.assign(alert, update);\n    return alert;\n  }\n\n  async markAlertAsRead(id: string): Promise<void> {\n    const alert = this.alerts.find(a => a._id === id);\n    if (alert) alert.isRead = true;\n  }\n\n  async deleteAlert(id: string): Promise<void> {\n    const idx = this.alerts.findIndex(a => a._id === id);\n    if (idx !== -1) this.alerts.splice(idx, 1);\n  }\n\n  async getIotSensorData(): Promise<IotSensorData[]> {\n    return this.sensorData;\n  }\n\n  async createIotSensorData(insertData: InsertIotSensorData): Promise<IotSensorData> {\n    const data = { _id: randomUUID(), ...insertData, timestamp: new Date() };\n    this.sensorData.push(data);\n    return data;\n  }\n\n  async getDashboardMetrics(): Promise<DashboardMetrics> {\n    const activeDeliveries = this.deliveries.filter(d => d.status === \"in-transit\").length;\n    const completedToday = this.deliveries.filter(d => {\n      const createdDate = new Date(d.createdAt);\n      const today = new Date();\n      return d.status === \"delivered\" && createdDate.toDateString() === today.toDateString();\n    }).length;\n    const activeVehicles = this.vehicles.filter(v => v.status !== \"idle\").length;\n    const pendingAlerts = this.alerts.filter(a => !a.isRead).length;\n\n    const avgDeliveryTime = this.deliveries.length > 0\n      ? this.deliveries.reduce((sum, d) => {\n          if (d.actualDeliveryTime && d.createdAt) {\n            return sum + (new Date(d.actualDeliveryTime).getTime() - new Date(d.createdAt).getTime());\n          }\n          return sum;\n        }, 0) / this.deliveries.length / (1000 * 60)\n      : 0;\n\n    const onTimePercentage = this.deliveries.length > 0\n      ? (this.deliveries.filter(d => {\n          if (d.actualDeliveryTime && d.estimatedDeliveryTime) {\n            return new Date(d.actualDeliveryTime) <= new Date(d.estimatedDeliveryTime);\n          }\n          return false;\n        }).length / this.deliveries.length) * 100\n      : 0;\n\n    const totalRevenue = this.deliveries.reduce((sum, d) => sum + (Math.random() * 1000), 0);\n    const routeEfficiency = activeVehicles > 0 ? (activeDeliveries / activeVehicles) * 100 : 0;\n\n    return {\n      activeDeliveries,\n      completedToday,\n      activeVehicles,\n      averageDeliveryTime: Math.round(avgDeliveryTime),\n      onTimePercentage: Math.round(onTimePercentage),\n      totalRevenue: Math.round(totalRevenue),\n      pendingAlerts,\n      routeEfficiency: Math.round(routeEfficiency),\n    };\n  }\n}\n\nlet mongoClient: MongoClient | null = null;\nexport let storage: IStorage;\n\nexport async function initializeStorage(): Promise<void> {\n  const mongoUri = process.env.MONGODB_URI;\n\n  if (mongoUri) {\n    try {\n      mongoClient = new MongoClient(mongoUri);\n      await mongoClient.connect();\n      const db = mongoClient.db(\"smart_delivery\");\n      storage = new DbStorage(db);\n      await (storage as DbStorage).seedIfEmpty();\n      console.log(\"Connected to MongoDB\");\n    } catch (error) {\n      console.error(\"MongoDB connection failed, falling back to in-memory storage:\", error);\n      storage = new MemStorage();\n    }\n  } else {\n    storage = new MemStorage();\n  }\n}\n","size_bytes":20513},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"shared/schema.ts":{"content":"import { z } from \"zod\";\n\n// Zod validation schemas\nexport const userSchema = z.object({\n  _id: z.string().optional(),\n  username: z.string(),\n  password: z.string(),\n  role: z.string().default(\"driver\"),\n  name: z.string(),\n});\n\nexport const vehicleSchema = z.object({\n  _id: z.string().optional(),\n  vehicleNumber: z.string(),\n  driverName: z.string(),\n  driverId: z.string().optional(),\n  status: z.string().default(\"idle\"),\n  latitude: z.number(),\n  longitude: z.number(),\n  speed: z.number().default(0),\n  fuelLevel: z.number().default(100),\n  temperature: z.number().optional(),\n  currentRouteId: z.string().optional(),\n  routeCompletion: z.number().default(0),\n  lastUpdate: z.date().default(() => new Date()),\n});\n\nexport const deliverySchema = z.object({\n  _id: z.string().optional(),\n  orderId: z.string(),\n  status: z.string().default(\"pending\"),\n  customerId: z.string(),\n  customerName: z.string(),\n  pickupAddress: z.string(),\n  pickupLat: z.number(),\n  pickupLng: z.number(),\n  deliveryAddress: z.string(),\n  deliveryLat: z.number(),\n  deliveryLng: z.number(),\n  vehicleId: z.string().optional(),\n  routeId: z.string().optional(),\n  scheduledTime: z.date().optional(),\n  estimatedDeliveryTime: z.date().optional(),\n  actualDeliveryTime: z.date().optional(),\n  priority: z.string().default(\"normal\"),\n  packageWeight: z.number().optional(),\n  createdAt: z.date().default(() => new Date()),\n});\n\nexport const routeSchema = z.object({\n  _id: z.string().optional(),\n  name: z.string(),\n  vehicleId: z.string().optional(),\n  status: z.string().default(\"planned\"),\n  algorithm: z.string().default(\"dijkstra\"),\n  totalDistance: z.number(),\n  estimatedDuration: z.number(),\n  estimatedCost: z.number(),\n  actualCost: z.number().optional(),\n  waypoints: z.string(),\n  pathCoordinates: z.string(),\n  createdAt: z.date().default(() => new Date()),\n  startedAt: z.date().optional(),\n  completedAt: z.date().optional(),\n});\n\nexport const alertSchema = z.object({\n  _id: z.string().optional(),\n  type: z.string(),\n  severity: z.string().default(\"info\"),\n  message: z.string(),\n  vehicleId: z.string().optional(),\n  deliveryId: z.string().optional(),\n  routeId: z.string().optional(),\n  isRead: z.boolean().default(false),\n  metadata: z.string().optional(),\n  createdAt: z.date().default(() => new Date()),\n});\n\nexport const iotSensorDataSchema = z.object({\n  _id: z.string().optional(),\n  deviceId: z.string(),\n  vehicleId: z.string(),\n  latitude: z.number(),\n  longitude: z.number(),\n  speed: z.number(),\n  fuelLevel: z.number(),\n  temperature: z.number().optional(),\n  engineStatus: z.string().default(\"running\"),\n  connectionStatus: z.string().default(\"connected\"),\n  timestamp: z.date().default(() => new Date()),\n});\n\n// Insert schemas (omit auto-generated fields)\nexport const insertUserSchema = userSchema.omit({ _id: true });\nexport const insertVehicleSchema = vehicleSchema.omit({ _id: true, lastUpdate: true });\nexport const insertDeliverySchema = deliverySchema.omit({ _id: true, createdAt: true });\nexport const insertRouteSchema = routeSchema.omit({ _id: true, createdAt: true });\nexport const insertAlertSchema = alertSchema.omit({ _id: true, createdAt: true });\nexport const insertIotSensorDataSchema = iotSensorDataSchema.omit({ _id: true, timestamp: true });\n\n// Type definitions\nexport type User = z.infer<typeof userSchema>;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type Vehicle = z.infer<typeof vehicleSchema>;\nexport type InsertVehicle = z.infer<typeof insertVehicleSchema>;\nexport type Delivery = z.infer<typeof deliverySchema>;\nexport type InsertDelivery = z.infer<typeof insertDeliverySchema>;\nexport type Route = z.infer<typeof routeSchema>;\nexport type InsertRoute = z.infer<typeof insertRouteSchema>;\nexport type Alert = z.infer<typeof alertSchema>;\nexport type InsertAlert = z.infer<typeof insertAlertSchema>;\nexport type IotSensorData = z.infer<typeof iotSensorDataSchema>;\nexport type InsertIotSensorData = z.infer<typeof insertIotSensorDataSchema>;\n\nexport type DashboardMetrics = {\n  activeDeliveries: number;\n  completedToday: number;\n  activeVehicles: number;\n  averageDeliveryTime: number;\n  onTimePercentage: number;\n  totalRevenue: number;\n  pendingAlerts: number;\n  routeEfficiency: number;\n};\n","size_bytes":4258},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"JetBrains Mono\", \"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4077},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/pages/analytics.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport { Calendar, Download, TrendingUp } from \"lucide-react\";\nimport { useState } from \"react\";\n\nconst deliveryTrendsData = [\n  { date: \"Mon\", deliveries: 45, completed: 42, delayed: 3 },\n  { date: \"Tue\", deliveries: 52, completed: 48, delayed: 4 },\n  { date: \"Wed\", deliveries: 38, completed: 36, delayed: 2 },\n  { date: \"Thu\", deliveries: 61, completed: 57, delayed: 4 },\n  { date: \"Fri\", deliveries: 58, completed: 55, delayed: 3 },\n  { date: \"Sat\", deliveries: 42, completed: 40, delayed: 2 },\n  { date: \"Sun\", deliveries: 35, completed: 34, delayed: 1 },\n];\n\nconst costAnalysisData = [\n  { route: \"Route A\", fuel: 245, labor: 380, maintenance: 120 },\n  { route: \"Route B\", fuel: 198, labor: 340, maintenance: 95 },\n  { route: \"Route C\", fuel: 312, labor: 420, maintenance: 140 },\n  { route: \"Route D\", fuel: 275, labor: 360, maintenance: 110 },\n  { route: \"Route E\", fuel: 189, labor: 320, maintenance: 85 },\n];\n\nconst deliveryStatusData = [\n  { name: \"Delivered\", value: 342, color: \"#16a34a\" },\n  { name: \"In Transit\", value: 58, color: \"#2563eb\" },\n  { name: \"Pending\", value: 23, color: \"#eab308\" },\n  { name: \"Delayed\", value: 12, color: \"#dc2626\" },\n];\n\nexport default function AnalyticsPage() {\n  const [timeRange, setTimeRange] = useState(\"7d\");\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-analytics\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Analytics</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Insights and performance metrics for your operations\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Select value={timeRange} onValueChange={setTimeRange}>\n            <SelectTrigger className=\"w-40\" data-testid=\"select-time-range\">\n              <Calendar className=\"h-4 w-4 mr-2\" />\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"24h\">Last 24 Hours</SelectItem>\n              <SelectItem value=\"7d\">Last 7 Days</SelectItem>\n              <SelectItem value=\"30d\">Last 30 Days</SelectItem>\n              <SelectItem value=\"90d\">Last 90 Days</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button variant=\"outline\" data-testid=\"button-export-data\" onClick={() => {\n            const csv = \"Analytics Export\\nTime Range: \" + timeRange + \"\\nGenerated: \" + new Date().toISOString();\n            const blob = new Blob([csv], { type: \"text/csv\" });\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement(\"a\");\n            a.href = url;\n            a.download = `analytics-${Date.now()}.csv`;\n            a.click();\n          }}>\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base font-medium\">Delivery Trends</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={deliveryTrendsData}>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"hsl(var(--border))\" />\n                <XAxis\n                  dataKey=\"date\"\n                  stroke=\"hsl(var(--muted-foreground))\"\n                  fontSize={12}\n                />\n                <YAxis stroke=\"hsl(var(--muted-foreground))\" fontSize={12} />\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: \"hsl(var(--popover))\",\n                    border: \"1px solid hsl(var(--border))\",\n                    borderRadius: \"6px\",\n                  }}\n                />\n                <Legend />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"deliveries\"\n                  stroke=\"hsl(var(--chart-1))\"\n                  strokeWidth={2}\n                  name=\"Total Deliveries\"\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"completed\"\n                  stroke=\"hsl(var(--chart-3))\"\n                  strokeWidth={2}\n                  name=\"Completed\"\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"delayed\"\n                  stroke=\"hsl(var(--destructive))\"\n                  strokeWidth={2}\n                  name=\"Delayed\"\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base font-medium\">Delivery Status Distribution</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <PieChart>\n                <Pie\n                  data={deliveryStatusData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                  outerRadius={100}\n                  fill=\"#8884d8\"\n                  dataKey=\"value\"\n                >\n                  {deliveryStatusData.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={entry.color} />\n                  ))}\n                </Pie>\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: \"hsl(var(--popover))\",\n                    border: \"1px solid hsl(var(--border))\",\n                    borderRadius: \"6px\",\n                  }}\n                />\n              </PieChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        <Card className=\"lg:col-span-2\">\n          <CardHeader>\n            <CardTitle className=\"text-base font-medium\">Cost Analysis by Route</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={costAnalysisData}>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"hsl(var(--border))\" />\n                <XAxis\n                  dataKey=\"route\"\n                  stroke=\"hsl(var(--muted-foreground))\"\n                  fontSize={12}\n                />\n                <YAxis stroke=\"hsl(var(--muted-foreground))\" fontSize={12} />\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: \"hsl(var(--popover))\",\n                    border: \"1px solid hsl(var(--border))\",\n                    borderRadius: \"6px\",\n                  }}\n                />\n                <Legend />\n                <Bar dataKey=\"fuel\" fill=\"hsl(var(--chart-1))\" name=\"Fuel Cost\" />\n                <Bar dataKey=\"labor\" fill=\"hsl(var(--chart-2))\" name=\"Labor Cost\" />\n                <Bar dataKey=\"maintenance\" fill=\"hsl(var(--chart-4))\" name=\"Maintenance\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base font-medium\">Top Performing Routes</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            {costAnalysisData.map((route, index) => {\n              const totalCost = route.fuel + route.labor + route.maintenance;\n              const efficiency = Math.round((1 - totalCost / 1000) * 100);\n\n              return (\n                <div\n                  key={route.route}\n                  className=\"flex items-center gap-4 rounded-md border p-4 hover-elevate\"\n                  data-testid={`route-performance-${index}`}\n                >\n                  <div className=\"flex h-10 w-10 items-center justify-center rounded-md bg-primary/10 font-bold text-primary\">\n                    {index + 1}\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium\">{route.route}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Total Cost: ${totalCost.toFixed(2)}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <TrendingUp className=\"h-4 w-4 text-green-600\" />\n                    <span className=\"font-mono text-sm font-medium\">{efficiency}% efficient</span>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":9084},"client/src/components/dialogs/optimize-route-dialog.tsx":{"content":"import { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertRouteSchema } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport type { Vehicle, Delivery } from \"@shared/schema\";\n\ninterface OptimizeRouteDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function OptimizeRouteDialog({ open, onOpenChange }: OptimizeRouteDialogProps) {\n  const { toast } = useToast();\n  \n  const { data: vehicles } = useQuery<Vehicle[]>({\n    queryKey: [\"/api/vehicles\"],\n  });\n\n  const { data: deliveries } = useQuery<Delivery[]>({\n    queryKey: [\"/api/deliveries\"],\n  });\n\n  const form = useForm({\n    resolver: zodResolver(insertRouteSchema),\n    defaultValues: {\n      vehicleId: \"\",\n      name: `Route-${Date.now()}`,\n      algorithm: \"dijkstra\",\n      waypoints: \"[]\",\n      pathCoordinates: \"[]\",\n      totalDistance: 0,\n      estimatedDuration: 0,\n      estimatedCost: 0,\n      status: \"planned\",\n    },\n  });\n\n  const optimizeMutation = useMutation({\n    mutationFn: async (data: typeof form.getValues) => {\n      return apiRequest(\"POST\", \"/api/routes\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/routes\"] });\n      toast({\n        title: \"Success\",\n        description: \"Route optimized successfully!\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to optimize route. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Optimize Route</DialogTitle>\n          <DialogDescription>\n            Select a vehicle and algorithm to optimize its delivery route.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit((data: any) => {\n            // Convert waypoints and pathCoordinates to JSON if they're objects\n            const payload = {\n              ...data,\n              waypoints: typeof data.waypoints === 'string' ? data.waypoints : JSON.stringify(data.waypoints || []),\n              pathCoordinates: typeof data.pathCoordinates === 'string' ? data.pathCoordinates : JSON.stringify(data.pathCoordinates || []),\n            };\n            optimizeMutation.mutate(payload);\n          })} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"vehicleId\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Select Vehicle</FormLabel>\n                  <Select value={field.value} onValueChange={field.onChange}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Choose a vehicle...\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {vehicles?.map((v) => (\n                        <SelectItem key={v.id} value={v.id}>\n                          {v.vehicleNumber} ({v.driverName})\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"algorithm\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Optimization Algorithm</FormLabel>\n                  <Select value={field.value} onValueChange={field.onChange}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"dijkstra\">Dijkstra (Shortest Path)</SelectItem>\n                      <SelectItem value=\"astar\">A* (Heuristic)</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"p-3 bg-muted rounded text-sm text-muted-foreground\">\n              <p>This will analyze all pending deliveries and create an optimized route for the selected vehicle.</p>\n            </div>\n\n            <div className=\"flex gap-2 justify-end\">\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={optimizeMutation.isPending}>\n                {optimizeMutation.isPending ? \"Optimizing...\" : \"Optimize Route\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5514},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/pages/dashboard.tsx":{"content":"import { useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { MetricsCard } from \"@/components/metrics-card\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Package,\n  Truck,\n  CheckCircle,\n  Clock,\n  AlertTriangle,\n  DollarSign,\n  Activity,\n  TrendingUp,\n} from \"lucide-react\";\nimport type { DashboardMetrics, Alert, Vehicle } from \"@shared/schema\";\nimport { formatIST } from \"@/lib/format-time\";\n\nexport default function Dashboard() {\n  const [, setLocation] = useLocation();\n  \n  // REAL-TIME UPDATES: Refetch every 1 second for live dashboard\n  const { data: metrics, isLoading: metricsLoading, refetch: refetchMetrics } = useQuery<DashboardMetrics>({\n    queryKey: [\"/api/metrics\"],\n    refetchInterval: 1000, // Refetch every 1 second for real-time updates\n    refetchOnWindowFocus: true,\n    staleTime: 0, // Never cache - always fresh\n  });\n\n  const { data: recentAlerts, isLoading: alertsLoading, refetch: refetchAlerts } = useQuery<Alert[]>({\n    queryKey: [\"/api/alerts\", \"recent\"],\n    refetchInterval: 2000, // Refetch every 2 seconds\n    staleTime: 0,\n  });\n\n  const { data: activeVehicles, isLoading: vehiclesLoading, refetch: refetchVehicles } = useQuery<Vehicle[]>({\n    queryKey: [\"/api/vehicles\", \"active\"],\n    refetchInterval: 1500, // Refetch every 1.5 seconds\n    staleTime: 0,\n  });\n  \n  // Listen to WebSocket for instant updates\n  useEffect(() => {\n    const wsProtocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    const ws = new WebSocket(`${wsProtocol}//${window.location.host}/ws`);\n    \n    ws.onopen = () => console.log(\"Dashboard WebSocket connected\");\n    \n    ws.onmessage = (event) => {\n      const message = JSON.parse(event.data);\n      \n      // Refetch on any vehicle/delivery update\n      if (message.type === \"vehicle_update\" || message.type === \"delivery_update\") {\n        refetchMetrics();\n        refetchVehicles();\n        refetchAlerts();\n      }\n    };\n    \n    ws.onerror = (err) => console.error(\"Dashboard WebSocket error:\", err);\n    \n    return () => {\n      if (ws.readyState === WebSocket.OPEN) {\n        ws.close();\n      }\n    };\n  }, [refetchMetrics, refetchVehicles, refetchAlerts]);\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"destructive\";\n      case \"warning\":\n        return \"default\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"in-transit\":\n        return \"bg-blue-500\";\n      case \"idle\":\n        return \"bg-gray-400\";\n      case \"maintenance\":\n        return \"bg-yellow-500\";\n      default:\n        return \"bg-green-500\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-dashboard\">\n      <div>\n        <h1 className=\"text-2xl font-semibold\">Dashboard</h1>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          Real-time overview of your delivery operations\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4\">\n        {metricsLoading ? (\n          <>\n            {[1, 2, 3, 4].map((i) => (\n              <Card key={i}>\n                <CardContent className=\"p-6\">\n                  <div className=\"h-20 animate-pulse bg-muted rounded\" />\n                </CardContent>\n              </Card>\n            ))}\n          </>\n        ) : (\n          <>\n            <MetricsCard\n              title=\"Active Deliveries\"\n              value={metrics?.activeDeliveries ?? 0}\n              icon={Package}\n              trend={{ value: 12, isPositive: true }}\n            />\n            <MetricsCard\n              title=\"Active Vehicles\"\n              value={metrics?.activeVehicles ?? 0}\n              icon={Truck}\n            />\n            <MetricsCard\n              title=\"Completed Today\"\n              value={metrics?.completedToday ?? 0}\n              icon={CheckCircle}\n              trend={{ value: 8, isPositive: true }}\n            />\n            <MetricsCard\n              title=\"On-Time Rate\"\n              value={`${metrics?.onTimePercentage ?? 0}%`}\n              icon={Clock}\n              trend={{ value: 3, isPositive: true }}\n            />\n          </>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-medium\">Recent Alerts</CardTitle>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-view-all-alerts\" onClick={() => setLocation(\"/alerts\")}>\n              View All\n            </Button>\n          </CardHeader>\n          <CardContent>\n            {alertsLoading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <div key={i} className=\"h-16 animate-pulse bg-muted rounded\" />\n                ))}\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {recentAlerts && recentAlerts.length > 0 ? (\n                  recentAlerts.slice(0, 5).map((alert) => (\n                    <div\n                      key={alert.id}\n                      className=\"flex items-start gap-3 rounded-md border p-3 hover-elevate\"\n                      data-testid={`alert-${alert.id}`}\n                    >\n                      <AlertTriangle\n                        className={`h-5 w-5 mt-0.5 ${\n                          alert.severity === \"critical\"\n                            ? \"text-red-600\"\n                            : alert.severity === \"warning\"\n                            ? \"text-yellow-600\"\n                            : \"text-blue-600\"\n                        }`}\n                      />\n                      <div className=\"flex-1 space-y-1\">\n                        <p className=\"text-sm font-medium\">{alert.message}</p>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge variant={getSeverityColor(alert.severity)} className=\"text-xs\">\n                            {alert.severity}\n                          </Badge>\n                          <span className=\"text-xs text-muted-foreground font-mono\">\n                            {formatIST(alert.createdAt)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <AlertTriangle className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    <p className=\"text-sm\">No recent alerts</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-2\">\n            <CardTitle className=\"text-base font-medium\">Active Vehicles</CardTitle>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-view-all-vehicles\" onClick={() => setLocation(\"/vehicles\")}>\n              View All\n            </Button>\n          </CardHeader>\n          <CardContent>\n            {vehiclesLoading ? (\n              <div className=\"space-y-3\">\n                {[1, 2, 3].map((i) => (\n                  <div key={i} className=\"h-16 animate-pulse bg-muted rounded\" />\n                ))}\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {activeVehicles && activeVehicles.length > 0 ? (\n                  activeVehicles.slice(0, 5).map((vehicle) => (\n                    <div\n                      key={vehicle.id}\n                      className=\"flex items-center gap-3 rounded-md border p-3 hover-elevate\"\n                      data-testid={`vehicle-${vehicle.id}`}\n                    >\n                      <div className={`h-3 w-3 rounded-full ${getStatusColor(vehicle.status)}`} />\n                      <div className=\"flex-1 space-y-1\">\n                        <div className=\"flex items-center justify-between\">\n                          <p className=\"text-sm font-medium\">{vehicle.vehicleNumber}</p>\n                          <span className=\"text-xs text-muted-foreground font-mono\">\n                            {vehicle.speed} km/h\n                          </span>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground\">{vehicle.driverName}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xs text-muted-foreground\">Fuel</p>\n                        <p className=\"text-sm font-medium\">{vehicle.fuelLevel}%</p>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    <Truck className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                    <p className=\"text-sm\">No active vehicles</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4\">\n        <MetricsCard\n          title=\"Avg Delivery Time\"\n          value={`${metrics?.averageDeliveryTime ?? 0} min`}\n          icon={Activity}\n          subtitle=\"Last 7 days\"\n        />\n        <MetricsCard\n          title=\"Route Efficiency\"\n          value={`${metrics?.routeEfficiency ?? 0}%`}\n          icon={TrendingUp}\n          trend={{ value: 5, isPositive: true }}\n        />\n        <MetricsCard\n          title=\"Total Revenue\"\n          value={`$${(metrics?.totalRevenue ?? 0).toLocaleString()}`}\n          icon={DollarSign}\n          subtitle=\"This month\"\n        />\n        <MetricsCard\n          title=\"Pending Alerts\"\n          value={metrics?.pendingAlerts ?? 0}\n          icon={AlertTriangle}\n        />\n      </div>\n    </div>\n  );\n}\n","size_bytes":10209},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"design_guidelines.md":{"content":"# Design Guidelines: Smart Route Optimization & Delivery Scheduling System\n\n## Design Approach\n**Selected Approach:** Design System (Material Design + Linear-inspired)  \n**Justification:** Enterprise logistics dashboard requiring data density, real-time updates, and operational efficiency. Drawing from Material Design's structured components and Linear's clean typography for optimal usability.\n\n---\n\n## Typography\n\n**Font Families:**\n- Primary: Inter (headings, UI elements, data labels)\n- Monospace: JetBrains Mono (GPS coordinates, sensor readings, timestamps)\n\n**Hierarchy:**\n- Dashboard Title: text-2xl font-semibold\n- Section Headers: text-lg font-medium\n- Card Titles: text-base font-medium\n- Body/Data: text-sm font-normal\n- Metrics/Stats: text-3xl font-bold (large numbers)\n- Labels: text-xs font-medium uppercase tracking-wide\n- Timestamps: text-xs font-normal (monospace)\n\n---\n\n## Layout System\n\n**Spacing Primitives:** Tailwind units of 2, 4, 6, 8 (p-4, gap-6, m-8)\n\n**Grid Structure:**\n- Dashboard: 12-column grid with sidebar (col-span-2) + main content (col-span-10)\n- Cards: Grid of 3-4 columns on desktop (grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4)\n- Map View: 70% map + 30% sidebar panel\n- Analytics: 2-column layout for charts (grid-cols-1 lg:grid-cols-2)\n\n**Container Widths:**\n- Full viewport with no max-width constraints (dashboard spans entire screen)\n- Card padding: p-6\n- Section spacing: space-y-6\n\n---\n\n## Component Library\n\n### Navigation & Layout\n**Sidebar Navigation:**\n- Fixed left sidebar (w-64)\n- Logo/brand at top (h-16)\n- Navigation items with icons (h-12, px-4)\n- Active state: border-l-4 indicator\n- User profile at bottom with role badge\n\n**Top Bar:**\n- Fixed header (h-16) with breadcrumbs, search, notifications, user menu\n- Real-time status indicators (Active Deliveries count, Alerts badge)\n- Quick actions dropdown\n\n### Core Dashboard Components\n\n**Map Container:**\n- Full-height interactive map using Leaflet\n- Floating controls panel (top-right): zoom, layers toggle, fullscreen\n- Route overlay with polylines showing optimized paths\n- Vehicle markers with real-time positions (pulsing animation)\n- Delivery waypoint markers with status icons\n- Info cards appear on marker click (w-80, absolute positioning)\n\n**Metrics Cards:**\n- Grid of stat cards (4 across on xl screens)\n- Large number (text-3xl) with trend indicator (up/down arrow + percentage)\n- Label below (text-xs uppercase)\n- Icon in top-right corner\n- Border with subtle shadow\n\n**Vehicle Tracking Panel:**\n- Scrollable list (max-h-screen overflow-y-auto)\n- Each vehicle card shows: ID, driver name, status badge, current location, ETA\n- Mini progress bar for route completion\n- Live GPS coordinates in monospace\n- Speed/fuel indicators with icon + value\n\n**Route Optimization Interface:**\n- Split view: algorithm visualization (left 60%) + parameters (right 40%)\n- Graph visualization canvas showing nodes/edges\n- Highlighted path in active state\n- Control panel with algorithm selector (Dijkstra/A* tabs)\n- Distance matrix table below\n- \"Optimize Route\" primary action button\n\n**Analytics Dashboard:**\n- Chart grid (2 columns, 3 rows)\n- Line charts for delivery trends over time\n- Bar charts for cost analysis by route/vehicle\n- Donut chart for delivery status distribution\n- Table for top routes/drivers\n- Date range picker in top-right\n\n**Alerts & Notifications Panel:**\n- Chronological list with severity indicators\n- Each alert: icon, timestamp, message, action button\n- Filter chips at top (All, Critical, Warnings, Info)\n- \"Mark all as read\" action\n- Auto-scroll to new alerts\n\n**IoT Sensor Data Display:**\n- Table layout with real-time updates (WebSocket indicator)\n- Columns: Device ID, GPS, Speed, Fuel Level, Temperature, Last Update\n- Status badges for connection state\n- Expandable rows for detailed telemetry\n- Export to CSV button\n\n### Forms & Inputs\n**Delivery Creation Form:**\n- Multi-step wizard (3 steps: Details, Route, Confirmation)\n- Step indicator at top\n- Form fields with floating labels\n- Autocomplete for addresses\n- Date/time pickers for scheduling\n- Vehicle/driver assignment dropdown\n- \"Calculate Route\" button triggers optimization preview\n\n**Search & Filters:**\n- Global search bar (w-96) with icon prefix\n- Advanced filters dropdown panel\n- Date range, status checkboxes, vehicle multi-select\n- Apply/Reset button group\n\n### Data Tables\n- Sticky header row\n- Sortable columns (click header, show arrow indicator)\n- Row hover state\n- Action menu (3-dot) in last column\n- Pagination controls at bottom\n- Rows per page selector\n\n### Modals & Overlays\n**Route Details Modal:**\n- Large modal (max-w-4xl)\n- Map on left, details list on right\n- Waypoint timeline with completion status\n- Driver assignment section\n- \"Edit Route\" / \"Cancel Delivery\" actions\n\n**Confirmation Dialogs:**\n- Centered modal (max-w-md)\n- Icon + heading + description\n- Two-button layout (Cancel secondary, Confirm primary)\n\n---\n\n## Responsive Behavior\n\n**Desktop (1440px+):** Full multi-column layouts, sidebar always visible  \n**Tablet (768-1440px):** Collapsible sidebar (hamburger menu), 2-column grids  \n**Mobile (< 768px):** Stack all columns, bottom navigation bar for key actions\n\n---\n\n## Real-Time Features\n\n**Live Update Indicators:**\n- Pulsing dot next to \"Live\" label in top bar\n- Animated transitions for data changes (fade in new values)\n- Toast notifications slide in from top-right for new alerts\n- Vehicle markers smoothly animate to new positions\n\n**WebSocket Connection Status:**\n- Small indicator in footer: Connected (green dot) / Reconnecting (yellow pulse) / Disconnected (red)\n\n---\n\n## Role-Based Views\n\n**Admin:** Full access, analytics, user management section  \n**Manager:** Delivery overview, route optimization, vehicle tracking  \n**Driver:** Simplified view with assigned deliveries, navigation, checklist\n\n---\n\n## Images\n\nNo hero images required. This is a functional dashboard.\n\n**Icons:** Use Heroicons (solid variant) via CDN for all interface icons - consistent 20x20 or 24x24 sizes throughout.","size_bytes":6055},"client/src/pages/iot.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport {\n  Radio,\n  Download,\n  RefreshCw,\n  Activity,\n  Thermometer,\n  Fuel,\n  Zap,\n  MapPin,\n  AlertCircle,\n  TrendingUp,\n} from \"lucide-react\";\nimport type { IotSensorData } from \"@shared/schema\";\nimport { formatIST } from \"@/lib/format-time\";\n\nexport default function IoTPage() {\n  const { toast } = useToast();\n  const [selectedSensor, setSelectedSensor] = useState<IotSensorData | null>(null);\n  const [alertThresholds, setAlertThresholds] = useState({\n    fuel: 20,\n    temp: 45,\n    speed: 80,\n  });\n\n  const { data: sensorData, isLoading, refetch } = useQuery<IotSensorData[]>({\n    queryKey: [\"/api/iot/sensors\"],\n    refetchInterval: 5000,\n  });\n\n  const { data: vehicles = [] } = useQuery({\n    queryKey: [\"/api/vehicles\"],\n  });\n\n  const createAlertMutation = useMutation({\n    mutationFn: async () => {\n      if (!selectedSensor) return;\n      return apiRequest(\"POST\", \"/api/alerts\", {\n        type: \"sensor\",\n        severity: \"warning\",\n        message: `Alert set for sensor ${selectedSensor.deviceId}: Fuel < ${alertThresholds.fuel}%, Temp > ${alertThresholds.temp}C, Speed > ${alertThresholds.speed} km/h`,\n        vehicleId: selectedSensor.vehicleId,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Alert thresholds set successfully!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/alerts\"] });\n      setSelectedSensor(null);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to set alert.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getConnectionStatus = (status: string) => {\n    switch (status) {\n      case \"connected\":\n        return { variant: \"default\" as const, color: \"bg-green-500\" };\n      case \"disconnected\":\n        return { variant: \"destructive\" as const, color: \"bg-red-500\" };\n      case \"unstable\":\n        return { variant: \"secondary\" as const, color: \"bg-yellow-500\" };\n      default:\n        return { variant: \"secondary\" as const, color: \"bg-gray-400\" };\n    }\n  };\n\n  const getEngineStatus = (status: string) => {\n    switch (status) {\n      case \"running\":\n        return { variant: \"default\" as const, text: \"Running\" };\n      case \"idle\":\n        return { variant: \"secondary\" as const, text: \"Idle\" };\n      case \"off\":\n        return { variant: \"secondary\" as const, text: \"Off\" };\n      default:\n        return { variant: \"secondary\" as const, text: status };\n    }\n  };\n\n  const getVehicleInfo = (vehicleId: string) => {\n    return (vehicles as any[]).find((v) => v.id === vehicleId);\n  };\n\n  const handleViewRoute = () => {\n    if (!selectedSensor) return;\n    const vehicle = getVehicleInfo(selectedSensor.vehicleId);\n    if (vehicle) {\n      window.location.href = `/map`;\n      toast({\n        title: \"Redirecting\",\n        description: `Opening map with vehicle ${vehicle.vehicleNumber}`,\n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-iot\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">IoT Sensor Data</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Real-time telemetry from vehicle sensors - Click on any row for details\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"secondary\" className=\"gap-1\">\n            <span className=\"relative flex h-2 w-2\">\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\n              <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\n            </span>\n            Live Updates\n          </Badge>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => refetch()}\n            data-testid=\"button-refresh-sensors\"\n          >\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\n            Refresh\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            data-testid=\"button-export-data\"\n            onClick={() => {\n              const csv = (sensorData || [])\n                .map(\n                  (s) =>\n                    `${s.deviceId},${s.vehicleId},${s.latitude},${s.longitude},${s.speed},${s.fuelLevel},${s.temperature || 0}`\n                )\n                .join(\"\\n\");\n              const blob = new Blob([csv || \"\"], { type: \"text/csv\" });\n              const url = window.URL.createObjectURL(blob);\n              const a = document.createElement(\"a\");\n              a.href = url;\n              a.download = `iot-sensors-${Date.now()}.csv`;\n              a.click();\n            }}\n          >\n            <Download className=\"h-4 w-4 mr-2\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Active Sensors\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">{sensorData?.length ?? 0}</h3>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <Radio className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Avg Speed\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">\n                  {sensorData\n                    ? Math.round(\n                        sensorData.reduce((acc, s) => acc + s.speed, 0) /\n                          sensorData.length\n                      )\n                    : 0}\n                </h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">km/h</p>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <Activity className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Avg Fuel\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">\n                  {sensorData\n                    ? Math.round(\n                        sensorData.reduce((acc, s) => acc + s.fuelLevel, 0) /\n                          sensorData.length\n                      )\n                    : 0}\n                </h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">%</p>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <Fuel className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Avg Temp\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">\n                  {sensorData\n                    ? Math.round(\n                        sensorData.reduce((acc, s) => acc + (s.temperature ?? 0), 0) /\n                          sensorData.length\n                      )\n                    : 0}\n                </h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">C</p>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <Thermometer className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base font-medium\">Sensor Readings</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"space-y-3\">\n              {[1, 2, 3, 4, 5].map((i) => (\n                <div key={i} className=\"h-16 animate-pulse bg-muted rounded\" />\n              ))}\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Device ID</TableHead>\n                    <TableHead>Vehicle</TableHead>\n                    <TableHead>GPS Location</TableHead>\n                    <TableHead>Speed</TableHead>\n                    <TableHead>Fuel</TableHead>\n                    <TableHead>Temp</TableHead>\n                    <TableHead>Engine</TableHead>\n                    <TableHead>Connection</TableHead>\n                    <TableHead>Last Update</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {sensorData && sensorData.length > 0 ? (\n                    sensorData.map((sensor) => {\n                      const connectionStatus = getConnectionStatus(sensor.connectionStatus);\n                      const engineStatus = getEngineStatus(sensor.engineStatus);\n\n                      return (\n                        <TableRow\n                          key={sensor.id}\n                          className=\"hover-elevate cursor-pointer\"\n                          data-testid={`sensor-row-${sensor.id}`}\n                          onClick={() => setSelectedSensor(sensor)}\n                        >\n                          <TableCell className=\"font-mono text-sm\">{sensor.deviceId}</TableCell>\n                          <TableCell className=\"font-mono text-sm\">\n                            {sensor.vehicleId.slice(0, 8)}\n                          </TableCell>\n                          <TableCell className=\"font-mono text-xs\">\n                            {sensor.latitude.toFixed(4)}, {sensor.longitude.toFixed(4)}\n                          </TableCell>\n                          <TableCell className=\"font-mono\">{sensor.speed} km/h</TableCell>\n                          <TableCell>\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"flex-1 h-2 bg-muted rounded-full overflow-hidden\">\n                                <div\n                                  className={`h-full ${\n                                    sensor.fuelLevel > 50\n                                      ? \"bg-green-500\"\n                                      : sensor.fuelLevel > 20\n                                      ? \"bg-yellow-500\"\n                                      : \"bg-red-500\"\n                                  }`}\n                                  style={{ width: `${sensor.fuelLevel}%` }}\n                                />\n                              </div>\n                              <span className=\"font-mono text-xs w-10\">{sensor.fuelLevel}%</span>\n                            </div>\n                          </TableCell>\n                          <TableCell className=\"font-mono\">\n                            {sensor.temperature ? `${sensor.temperature}C` : \"-\"}\n                          </TableCell>\n                          <TableCell>\n                            <Badge variant={engineStatus.variant} className=\"text-xs\">\n                              {engineStatus.text}\n                            </Badge>\n                          </TableCell>\n                          <TableCell>\n                            <div className=\"flex items-center gap-2\">\n                              <div className={`h-2 w-2 rounded-full ${connectionStatus.color}`} />\n                              <Badge variant={connectionStatus.variant} className=\"text-xs\">\n                                {sensor.connectionStatus}\n                              </Badge>\n                            </div>\n                          </TableCell>\n                          <TableCell className=\"font-mono text-xs\">\n                            {formatIST(sensor.timestamp)}\n                          </TableCell>\n                        </TableRow>\n                      );\n                    })\n                  ) : (\n                    <TableRow>\n                      <TableCell colSpan={9} className=\"text-center py-12\">\n                        <Radio className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                        <p className=\"text-muted-foreground\">No sensor data available</p>\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Sensor Details Modal */}\n      <Dialog open={!!selectedSensor} onOpenChange={() => setSelectedSensor(null)}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Radio className=\"h-5 w-5\" />\n              Sensor Details - {selectedSensor?.deviceId}\n            </DialogTitle>\n            <DialogDescription>\n              Vehicle: {getVehicleInfo(selectedSensor?.vehicleId || \"\")?.vehicleNumber || \"N/A\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedSensor && (\n            <Tabs defaultValue=\"overview\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-3\">\n                <TabsTrigger value=\"overview\" data-testid=\"tab-sensor-overview\">\n                  <TrendingUp className=\"h-4 w-4 mr-2\" />\n                  Overview\n                </TabsTrigger>\n                <TabsTrigger value=\"route\" data-testid=\"tab-sensor-route\">\n                  <MapPin className=\"h-4 w-4 mr-2\" />\n                  Route\n                </TabsTrigger>\n                <TabsTrigger value=\"alerts\" data-testid=\"tab-sensor-alerts\">\n                  <AlertCircle className=\"h-4 w-4 mr-2\" />\n                  Alerts\n                </TabsTrigger>\n              </TabsList>\n\n              {/* Overview Tab */}\n              <TabsContent value=\"overview\" className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm text-muted-foreground\">Device ID</p>\n                    <p className=\"font-mono font-medium\">{selectedSensor.deviceId}</p>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm text-muted-foreground\">Vehicle ID</p>\n                    <p className=\"font-mono font-medium\">{selectedSensor.vehicleId}</p>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm text-muted-foreground\">Location (GPS)</p>\n                    <p className=\"font-mono font-medium\">\n                      {selectedSensor.latitude.toFixed(6)}, {selectedSensor.longitude.toFixed(6)}\n                    </p>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <p className=\"text-sm text-muted-foreground\">Last Update</p>\n                    <p className=\"font-medium\">{formatIST(selectedSensor.timestamp)}</p>\n                  </div>\n                </div>\n\n                <div className=\"border-t pt-4\">\n                  <h3 className=\"font-semibold mb-3\">Live Sensor Readings</h3>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <Card>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <Activity className=\"h-5 w-5 text-blue-500\" />\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Speed</p>\n                            <p className=\"text-2xl font-bold\">{selectedSensor.speed}</p>\n                            <p className=\"text-xs text-muted-foreground\">km/h</p>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <Fuel className=\"h-5 w-5 text-green-500\" />\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Fuel Level</p>\n                            <p className=\"text-2xl font-bold\">{selectedSensor.fuelLevel}%</p>\n                            <div className=\"w-full bg-muted rounded-full h-1 mt-1\">\n                              <div\n                                className={`h-full rounded-full ${\n                                  selectedSensor.fuelLevel > 50\n                                    ? \"bg-green-500\"\n                                    : selectedSensor.fuelLevel > 20\n                                    ? \"bg-yellow-500\"\n                                    : \"bg-red-500\"\n                                }`}\n                                style={{ width: `${selectedSensor.fuelLevel}%` }}\n                              />\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <Thermometer className=\"h-5 w-5 text-orange-500\" />\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Temperature</p>\n                            <p className=\"text-2xl font-bold\">\n                              {selectedSensor.temperature || \"-\"}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground\">C</p>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                    <Card>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <Zap className=\"h-5 w-5 text-purple-500\" />\n                          <div>\n                            <p className=\"text-xs text-muted-foreground\">Engine Status</p>\n                            <Badge\n                              variant={\n                                selectedSensor.engineStatus === \"running\"\n                                  ? \"default\"\n                                  : \"secondary\"\n                              }\n                              className=\"mt-1\"\n                            >\n                              {selectedSensor.engineStatus}\n                            </Badge>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n                </div>\n              </TabsContent>\n\n              {/* Route Tab */}\n              <TabsContent value=\"route\" className=\"space-y-4\">\n                <div className=\"space-y-3\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    View this vehicle's route and delivery locations on the interactive map.\n                  </p>\n                  <div className=\"bg-muted p-4 rounded-md\">\n                    <p className=\"font-mono text-sm mb-3\">\n                      Current Location: {selectedSensor.latitude.toFixed(4)}N,{\" \"}\n                      {selectedSensor.longitude.toFixed(4)}E\n                    </p>\n                    <Button\n                      className=\"w-full\"\n                      data-testid=\"button-view-route-on-map\"\n                      onClick={handleViewRoute}\n                    >\n                      <MapPin className=\"h-4 w-4 mr-2\" />\n                      View Route on Map\n                    </Button>\n                  </div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Clicking the button above will take you to the Live Map where you can see this\n                    vehicle's assigned route, delivery points, and real-time movement.\n                  </p>\n                </div>\n              </TabsContent>\n\n              {/* Alerts Tab */}\n              <TabsContent value=\"alerts\" className=\"space-y-4\">\n                <div className=\"space-y-4\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    Set threshold alerts for this sensor. You'll be notified when values exceed\n                    these limits.\n                  </p>\n\n                  <div className=\"space-y-3 bg-muted p-4 rounded-md\">\n                    <div className=\"space-y-2\">\n                      <label className=\"text-sm font-medium flex items-center gap-2\">\n                        <Fuel className=\"h-4 w-4 text-green-500\" />\n                        Fuel Level Alert Threshold (%)\n                      </label>\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"100\"\n                        value={alertThresholds.fuel}\n                        onChange={(e) =>\n                          setAlertThresholds({\n                            ...alertThresholds,\n                            fuel: Number(e.target.value),\n                          })\n                        }\n                        data-testid=\"input-fuel-threshold\"\n                        placeholder=\"Alert when fuel drops below...\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        Current: {selectedSensor.fuelLevel}% - Alert if &lt; {alertThresholds.fuel}%\n                      </p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <label className=\"text-sm font-medium flex items-center gap-2\">\n                        <Thermometer className=\"h-4 w-4 text-orange-500\" />\n                        Temperature Alert Threshold (C)\n                      </label>\n                      <Input\n                        type=\"number\"\n                        value={alertThresholds.temp}\n                        onChange={(e) =>\n                          setAlertThresholds({\n                            ...alertThresholds,\n                            temp: Number(e.target.value),\n                          })\n                        }\n                        data-testid=\"input-temp-threshold\"\n                        placeholder=\"Alert when temperature exceeds...\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        Current: {selectedSensor.temperature || \"-\"}C - Alert if &gt;{\" \"}\n                        {alertThresholds.temp}C\n                      </p>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <label className=\"text-sm font-medium flex items-center gap-2\">\n                        <Activity className=\"h-4 w-4 text-blue-500\" />\n                        Speed Alert Threshold (km/h)\n                      </label>\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        value={alertThresholds.speed}\n                        onChange={(e) =>\n                          setAlertThresholds({\n                            ...alertThresholds,\n                            speed: Number(e.target.value),\n                          })\n                        }\n                        data-testid=\"input-speed-threshold\"\n                        placeholder=\"Alert when speed exceeds...\"\n                      />\n                      <p className=\"text-xs text-muted-foreground\">\n                        Current: {selectedSensor.speed} km/h - Alert if &gt; {alertThresholds.speed}\n                        km/h\n                      </p>\n                    </div>\n                  </div>\n\n                  <Button\n                    className=\"w-full\"\n                    data-testid=\"button-set-alert\"\n                    onClick={() => createAlertMutation.mutate()}\n                    disabled={createAlertMutation.isPending}\n                  >\n                    <AlertCircle className=\"h-4 w-4 mr-2\" />\n                    {createAlertMutation.isPending ? \"Setting Alert...\" : \"Set Alert Thresholds\"}\n                  </Button>\n                </div>\n              </TabsContent>\n            </Tabs>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":25939},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/app-sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport {\n  LayoutDashboard,\n  MapPin,\n  Truck,\n  Package,\n  Route,\n  BarChart3,\n  Bell,\n  Radio,\n  Navigation,\n} from \"lucide-react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\n\nconst mainNavItems = [\n  { title: \"Dashboard\", url: \"/\", icon: LayoutDashboard },\n  { title: \"Live Map\", url: \"/map\", icon: MapPin },\n  { title: \"Vehicles\", url: \"/vehicles\", icon: Truck },\n  { title: \"Deliveries\", url: \"/deliveries\", icon: Package },\n  { title: \"Routes\", url: \"/routes\", icon: Route },\n  { title: \"Analytics\", url: \"/analytics\", icon: BarChart3 },\n  { title: \"Alerts\", url: \"/alerts\", icon: Bell },\n  { title: \"IoT Sensors\", url: \"/iot\", icon: Radio },\n  { title: \"Driver View\", url: \"/driver\", icon: Navigation },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-6\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex h-10 w-10 items-center justify-center rounded-md bg-primary\">\n            <Truck className=\"h-5 w-5 text-primary-foreground\" />\n          </div>\n          <div>\n            <h2 className=\"text-lg font-semibold\">Smart Delivery</h2>\n            <p className=\"text-xs text-muted-foreground\">Route Optimization</p>\n          </div>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {mainNavItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url} data-testid={`nav-${item.url.slice(1) || 'dashboard'}`}>\n                    <Link href={item.url}>\n                      <item.icon className=\"h-4 w-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4\">\n        <div className=\"flex items-center gap-3 rounded-md border bg-card p-3\">\n          <Avatar className=\"h-9 w-9\">\n            <AvatarFallback className=\"bg-primary text-primary-foreground text-sm font-medium\">\n              AD\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 overflow-hidden\">\n            <p className=\"text-sm font-medium truncate\">Admin User</p>\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"secondary\" className=\"text-xs px-2 py-0\">\n                Admin\n              </Badge>\n            </div>\n          </div>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":3107},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/hooks/use-websocket.ts":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { queryClient } from \"@/lib/queryClient\";\n\nexport function useWebSocket() {\n  const wsRef = useRef<WebSocket | null>(null);\n  const [isConnected, setIsConnected] = useState(false);\n\n  useEffect(() => {\n    try {\n      // Use the same host and protocol as the current page\n      const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n      const host = window.location.host; // This includes both hostname and port\n      const wsUrl = `${protocol}//${host}/ws`;\n\n      console.log(\"Attempting WebSocket connection to:\", wsUrl);\n      \n      const ws = new WebSocket(wsUrl);\n      wsRef.current = ws;\n\n      ws.onopen = () => {\n        console.log(\"WebSocket connected\");\n        setIsConnected(true);\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data);\n          \n          if (message.type === \"vehicle_update\") {\n            queryClient.invalidateQueries({ queryKey: [\"/api/vehicles\"] });\n            queryClient.invalidateQueries({ queryKey: [\"/api/vehicles/active\"] });\n            queryClient.invalidateQueries({ queryKey: [\"/api/iot/sensors\"] });\n          }\n        } catch (error) {\n          console.error(\"Error parsing WebSocket message:\", error);\n        }\n      };\n\n      ws.onerror = (error) => {\n        console.error(\"WebSocket error:\", error);\n        setIsConnected(false);\n      };\n\n      ws.onclose = () => {\n        console.log(\"WebSocket disconnected\");\n        setIsConnected(false);\n      };\n    } catch (error) {\n      console.error(\"Failed to create WebSocket:\", error);\n    }\n\n    return () => {\n      if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n        wsRef.current.close();\n      }\n    };\n  }, []);\n\n  return { isConnected };\n}\n","size_bytes":1815},"client/src/components/dialogs/new-delivery-dialog.tsx":{"content":"import { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { useEffect } from \"react\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertDeliverySchema } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface NewDeliveryDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\n// Indian cities coordinates mapping for auto-detection\nconst CITY_COORDINATES: Record<string, { lat: number; lng: number }> = {\n  \"gaya\": { lat: 24.7955, lng: 84.9994 },\n  \"patna\": { lat: 25.5941, lng: 85.1376 },\n  \"bhubaneswar\": { lat: 20.2961, lng: 85.8245 },\n  \"cuttack\": { lat: 20.4625, lng: 85.8830 },\n  \"rourkela\": { lat: 22.2369, lng: 84.8549 },\n  \"sambalpur\": { lat: 21.4521, lng: 84.0032 },\n  \"bondamunda\": { lat: 22.1000, lng: 84.7000 },\n  \"delhi\": { lat: 28.7041, lng: 77.1025 },\n  \"mumbai\": { lat: 19.0760, lng: 72.8777 },\n  \"bangalore\": { lat: 12.9716, lng: 77.5946 },\n  \"kolkata\": { lat: 22.5726, lng: 88.3639 },\n  \"pune\": { lat: 18.5204, lng: 73.8567 },\n  \"hyderabad\": { lat: 17.3850, lng: 78.4867 },\n  \"ahmedabad\": { lat: 23.0225, lng: 72.5714 },\n  \"jaipur\": { lat: 26.9124, lng: 75.7873 },\n  \"lucknow\": { lat: 26.8467, lng: 80.9462 },\n  \"chandigarh\": { lat: 30.7333, lng: 76.7794 },\n  \"indore\": { lat: 22.7196, lng: 75.8577 },\n};\n\nexport function NewDeliveryDialog({ open, onOpenChange }: NewDeliveryDialogProps) {\n  const { toast } = useToast();\n  \n  // Extract coordinates from city name\n  const getCityCoordinates = (address: string): { lat?: number; lng?: number } => {\n    if (!address) return {};\n    const cityName = address.toLowerCase().trim();\n    for (const [city, coords] of Object.entries(CITY_COORDINATES)) {\n      if (cityName.includes(city)) {\n        return coords;\n      }\n    }\n    return {};\n  };\n  \n  // Generate ultra-unique order ID using crypto randomness\n  const generateUniqueId = (prefix: string) => {\n    // Generate 12 random hex characters for maximum uniqueness\n    const randomHex = Array.from(crypto.getRandomValues(new Uint8Array(6)))\n      .map(b => b.toString(16).padStart(2, '0'))\n      .join('')\n      .toUpperCase();\n    return `${prefix}-${randomHex}`;\n  };\n  \n  const form = useForm({\n    resolver: zodResolver(insertDeliverySchema),\n    defaultValues: {\n      orderId: generateUniqueId(\"ORD\"),\n      customerName: \"\",\n      customerId: generateUniqueId(\"CUST\"),\n      pickupAddress: \"\",\n      pickupLat: 22.2369, // Rourkela, Odisha\n      pickupLng: 84.8549,\n      deliveryAddress: \"\",\n      deliveryLat: 20.2, // Bhubaneswar, Odisha\n      deliveryLng: 85.8,\n      status: \"pending\",\n      priority: \"normal\",\n    },\n  });\n\n  // Regenerate IDs every time dialog opens\n  useEffect(() => {\n    if (open) {\n      form.reset({\n        orderId: generateUniqueId(\"ORD\"),\n        customerName: \"\",\n        customerId: generateUniqueId(\"CUST\"),\n        pickupAddress: \"\",\n        pickupLat: 22.2369,\n        pickupLng: 84.8549,\n        deliveryAddress: \"\",\n        deliveryLat: 20.2,\n        deliveryLng: 85.8,\n        status: \"pending\",\n        priority: \"normal\",\n      });\n    }\n  }, [open, form]);\n\n  const addDeliveryMutation = useMutation({\n    mutationFn: async (data: any) => {\n      // Auto-detect city coordinates if not explicitly set\n      const pickupCoords = getCityCoordinates(data.pickupAddress);\n      const deliveryCoords = getCityCoordinates(data.deliveryAddress);\n      \n      const cleanData = {\n        ...data,\n        pickupLat: parseFloat(data.pickupLat),\n        pickupLng: parseFloat(data.pickupLng),\n        deliveryLat: parseFloat(data.deliveryLat),\n        deliveryLng: parseFloat(data.deliveryLng),\n      };\n      return apiRequest(\"POST\", \"/api/deliveries\", cleanData);\n    },\n    onSuccess: async () => {\n      // Invalidate and immediately refetch all related queries\n      await queryClient.refetchQueries({ queryKey: [\"/api/deliveries\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/metrics\"] });\n      \n      toast({\n        title: \"Success\",\n        description: \"Delivery created successfully!\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: (error: any) => {\n      console.error(\"Delivery creation error:\", error);\n      const errorMsg = error?.response?.data?.details \n        ? JSON.stringify(error.response.data.details)\n        : error?.response?.data?.error\n        ? error.response.data.error\n        : error.message || \"Failed to create delivery. Please try again.\";\n      toast({\n        title: \"Error\",\n        description: errorMsg,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Create New Delivery</DialogTitle>\n          <DialogDescription>\n            Enter the delivery details to schedule a new order.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit((data: any) => addDeliveryMutation.mutate(data))} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"orderId\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Order ID</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., ORD-001\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"customerName\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Customer Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., Jane Smith\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"pickupAddress\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Pickup Address (e.g., \"Gaya\", \"Patna\", \"Rourkela\")</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"e.g., Gaya, Patna, Rourkela...\" \n                      {...field} \n                      onChange={(e) => {\n                        field.onChange(e);\n                        const coords = getCityCoordinates(e.target.value);\n                        if (coords.lat !== undefined && coords.lng !== undefined) {\n                          form.setValue(\"pickupLat\", coords.lat);\n                          form.setValue(\"pickupLng\", coords.lng);\n                        }\n                      }}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"deliveryAddress\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Delivery Address (e.g., \"Gaya\", \"Patna\", \"Bhubaneswar\")</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"e.g., Gaya, Patna, Bhubaneswar...\" \n                      {...field} \n                      onChange={(e) => {\n                        field.onChange(e);\n                        const coords = getCityCoordinates(e.target.value);\n                        if (coords.lat !== undefined && coords.lng !== undefined) {\n                          form.setValue(\"deliveryLat\", coords.lat);\n                          form.setValue(\"deliveryLng\", coords.lng);\n                        }\n                      }}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"p-3 bg-muted rounded text-sm text-muted-foreground\">\n              <p>GPS coordinates are automatically assigned based on the address. Latitude/Longitude help pinpoint exact locations for map display and route optimization.</p>\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"pickupLat\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Pickup Latitude</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" step=\"0.0001\" placeholder=\"22.2369 (Rourkela)\" {...field} value={field.value || \"\"} onChange={e => field.onChange(e.target.value ? parseFloat(e.target.value) : \"\")} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"pickupLng\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Pickup Longitude</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" step=\"0.0001\" placeholder=\"84.8549 (Rourkela)\" {...field} value={field.value || \"\"} onChange={e => field.onChange(e.target.value ? parseFloat(e.target.value) : \"\")} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"deliveryLat\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Delivery Latitude</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" step=\"0.0001\" placeholder=\"20.2 (Bhubaneswar)\" {...field} value={field.value || \"\"} onChange={e => field.onChange(e.target.value ? parseFloat(e.target.value) : \"\")} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"deliveryLng\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Delivery Longitude</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" step=\"0.0001\" placeholder=\"85.8 (Bhubaneswar)\" {...field} value={field.value || \"\"} onChange={e => field.onChange(e.target.value ? parseFloat(e.target.value) : \"\")} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"priority\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Priority</FormLabel>\n                  <Select value={field.value} onValueChange={field.onChange}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"low\">Low</SelectItem>\n                      <SelectItem value=\"normal\">Normal</SelectItem>\n                      <SelectItem value=\"high\">High</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex gap-2 justify-end\">\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={addDeliveryMutation.isPending}>\n                {addDeliveryMutation.isPending ? \"Creating...\" : \"Create Delivery\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":12486},"client/src/pages/map.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { MapContainer, TileLayer, Marker, Popup, Polyline } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Maximize2, Layers, Navigation, Play, ZoomIn } from \"lucide-react\";\nimport type { Vehicle, Delivery, Route } from \"@shared/schema\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport \"leaflet/dist/leaflet.css\";\n\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png\",\n  iconUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png\",\n  shadowUrl: \"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png\",\n});\n\nconst vehicleIcon = new L.Icon({\n  iconUrl: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%232563eb'%3E%3Cpath d='M18 18.5a1.5 1.5 0 0 1-1 1.5 1.5 1.5 0 0 1-1.5-1.5 1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1 1.5zm1.5-9-1.5-5H6L4.5 9.5H2v8h3a3 3 0 0 0 3 3 3 3 0 0 0 3-3h4a3 3 0 0 0 3 3 3 3 0 0 0 3-3h3v-8zm-17 3v-2h13v2z'/%3E%3C/svg%3E\",\n  iconSize: [32, 32],\n  iconAnchor: [16, 32],\n  popupAnchor: [0, -32],\n});\n\nconst deliveryIcon = new L.Icon({\n  iconUrl: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2316a34a'%3E%3Cpath d='M20 6h-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v2H4c-1.11 0-2 .89-2 2v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8c0-1.11-.89-2-2-2M8 4h8v2H8zm9 13l-4-4v3H9v-3l-4 4z'/%3E%3C/svg%3E\",\n  iconSize: [28, 28],\n  iconAnchor: [14, 28],\n  popupAnchor: [0, -28],\n});\n\nexport default function MapPage() {\n  const mapRef = useRef<L.Map>(null);\n  const [mapCenter] = useState<[number, number]>([22.2, 84.8]); // Rourkela, Odisha\n  const { toast } = useToast();\n\n  const { data: vehicles = [], refetch: refetchVehicles } = useQuery<Vehicle[]>({\n    queryKey: [\"/api/vehicles\"],\n    refetchInterval: 3000, // Real-time refresh every 3 seconds\n  });\n\n  const { data: deliveries = [], refetch: refetchDeliveries } = useQuery<Delivery[]>({\n    queryKey: [\"/api/deliveries\"],\n    refetchInterval: 5000, // Refresh every 5 seconds\n  });\n\n  const { data: routes = [], refetch: refetchRoutes } = useQuery<Route[]>({\n    queryKey: [\"/api/routes\"],\n    refetchInterval: 5000,\n  });\n\n  // Fit map to show all markers\n  useEffect(() => {\n    if (!mapRef.current || (vehicles.length === 0 && deliveries.length === 0)) return;\n\n    const bounds = L.latLngBounds([]);\n\n    // Add vehicle positions to bounds\n    vehicles.forEach((vehicle) => {\n      bounds.extend([vehicle.latitude, vehicle.longitude]);\n    });\n\n    // Add delivery positions to bounds\n    deliveries.forEach((delivery) => {\n      bounds.extend([delivery.pickupLat, delivery.pickupLng]);\n      bounds.extend([delivery.deliveryLat, delivery.deliveryLng]);\n    });\n\n    // Fit the map to the bounds with padding\n    if (bounds.isValid()) {\n      mapRef.current.fitBounds(bounds, { padding: [50, 50] });\n    }\n  }, [vehicles, deliveries]);\n\n  const optimizeMutation = useMutation({\n    mutationFn: async () => {\n      return apiRequest(\"POST\", \"/api/routes/optimize-all\", {});\n    },\n    onSuccess: (data: any) => {\n      const routes = data?.routes || [];\n      const assigned = data?.deliveriesAssigned || 0;\n      \n      console.log(\"Optimization result:\", { routes, assigned });\n      \n      if (routes.length === 0 && assigned === 0) {\n        toast({\n          title: \"No Pending Deliveries\",\n          description: \"All deliveries are already assigned to routes.\",\n        });\n      } else {\n        toast({\n          title: \"Success\",\n          description: `${assigned} deliveries assigned to ${routes.length} routes!`,\n        });\n      }\n      \n      // Invalidate cache and refetch immediately\n      queryClient.invalidateQueries({ queryKey: [\"/api/routes\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/vehicles\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/deliveries\"] });\n      \n      // Force refetch after cache invalidation\n      setTimeout(() => {\n        refetchRoutes();\n        refetchVehicles();\n        refetchDeliveries();\n      }, 100);\n    },\n    onError: (error: any) => {\n      console.error(\"Optimization error:\", error);\n      toast({\n        title: \"Error\",\n        description: error?.response?.data?.error || error.message || \"Failed to optimize routes\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"in-transit\":\n        return \"bg-blue-500\";\n      case \"pending\":\n        return \"bg-yellow-500\";\n      case \"completed\":\n        return \"bg-green-500\";\n      case \"delayed\":\n        return \"bg-red-500\";\n      default:\n        return \"bg-gray-400\";\n    }\n  };\n\n  return (\n    <div className=\"h-full w-full flex flex-col\" data-testid=\"page-map\">\n      <div className=\"flex items-center justify-between p-4 border-b bg-background\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Live Map</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Real-time vehicle tracking and delivery routes\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"secondary\" className=\"gap-1\">\n            <span className=\"relative flex h-2 w-2\">\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\n              <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\n            </span>\n            Live\n          </Badge>\n          <Button \n            size=\"sm\" \n            data-testid=\"button-optimize-routes\"\n            onClick={() => optimizeMutation.mutate()}\n            disabled={optimizeMutation.isPending}\n          >\n            <Play className=\"h-4 w-4 mr-2\" />\n            {optimizeMutation.isPending ? \"Optimizing...\" : \"Optimize Routes\"}\n          </Button>\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            data-testid=\"button-fit-bounds\"\n            onClick={() => {\n              if (!mapRef.current || (vehicles.length === 0 && deliveries.length === 0)) return;\n              \n              const bounds = L.latLngBounds([]);\n              vehicles.forEach((vehicle) => {\n                bounds.extend([vehicle.latitude, vehicle.longitude]);\n              });\n              deliveries.forEach((delivery) => {\n                bounds.extend([delivery.pickupLat, delivery.pickupLng]);\n                bounds.extend([delivery.deliveryLat, delivery.deliveryLng]);\n              });\n              \n              if (bounds.isValid()) {\n                mapRef.current.fitBounds(bounds, { padding: [50, 50] });\n              }\n            }}\n          >\n            <ZoomIn className=\"h-4 w-4 mr-2\" />\n            Fit All\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" data-testid=\"button-fullscreen\" onClick={() => {\n            const mapContainer = document.querySelector('.leaflet-container')?.parentElement;\n            if (mapContainer?.requestFullscreen) {\n              mapContainer.requestFullscreen();\n            }\n          }}>\n            <Maximize2 className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 relative w-full h-full overflow-hidden\">\n        <MapContainer\n          center={mapCenter}\n          zoom={12}\n          scrollWheelZoom={true}\n          className=\"h-full w-full\"\n          ref={mapRef}\n        >\n          <TileLayer\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n\n          {vehicles?.map((vehicle) => (\n            <Marker\n              key={vehicle._id}\n              position={[vehicle.latitude, vehicle.longitude]}\n              icon={vehicleIcon}\n              data-testid={`marker-vehicle-${vehicle._id}`}\n            >\n              <Popup>\n                <Card className=\"border-0 shadow-none\">\n                  <CardContent className=\"p-3 space-y-2\">\n                    <div>\n                      <p className=\"font-medium text-sm\">{vehicle.vehicleNumber}</p>\n                      <p className=\"text-xs text-muted-foreground\">{vehicle.driverName}</p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`h-2 w-2 rounded-full ${getStatusColor(vehicle.status)}`} />\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {vehicle.status}\n                      </Badge>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                      <div>\n                        <p className=\"text-muted-foreground\">Speed</p>\n                        <p className=\"font-mono font-medium\">{vehicle.speed} km/h</p>\n                      </div>\n                      <div>\n                        <p className=\"text-muted-foreground\">Fuel</p>\n                        <p className=\"font-mono font-medium\">{vehicle.fuelLevel}%</p>\n                      </div>\n                    </div>\n                    <div className=\"text-xs\">\n                      <p className=\"text-muted-foreground\">Location</p>\n                      <p className=\"font-mono text-xs\">\n                        {vehicle.latitude.toFixed(4)}, {vehicle.longitude.toFixed(4)}\n                      </p>\n                    </div>\n                  </CardContent>\n                </Card>\n              </Popup>\n            </Marker>\n          ))}\n\n          {deliveries?.map((delivery) => {\n            // Show both pickup and delivery points\n            return (\n              <div key={delivery._id}>\n                {/* Pickup point */}\n                <Marker\n                  position={[delivery.pickupLat, delivery.pickupLng]}\n                  icon={new L.Icon({\n                    iconUrl: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2308a16e'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z'/%3E%3C/svg%3E\",\n                    iconSize: [24, 24],\n                    iconAnchor: [12, 24],\n                    popupAnchor: [0, -24],\n                  })}\n                >\n                  <Popup>\n                    <Card className=\"border-0 shadow-none\">\n                      <CardContent className=\"p-2 space-y-1\">\n                        <p className=\"text-xs font-medium\">Pickup</p>\n                        <p className=\"text-xs text-muted-foreground\">{delivery.pickupAddress}</p>\n                      </CardContent>\n                    </Card>\n                  </Popup>\n                </Marker>\n                {/* Delivery point */}\n                <Marker\n                  position={[delivery.deliveryLat, delivery.deliveryLng]}\n                  icon={deliveryIcon}\n                >\n                  <Popup>\n                    <Card className=\"border-0 shadow-none\">\n                      <CardContent className=\"p-3 space-y-2\">\n                        <div>\n                          <p className=\"font-medium text-sm\">{delivery.orderId}</p>\n                          <p className=\"text-xs text-muted-foreground\">{delivery.customerName}</p>\n                        </div>\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {delivery.status}\n                        </Badge>\n                        <div className=\"text-xs\">\n                          <p className=\"text-muted-foreground\">Delivery Address</p>\n                          <p className=\"text-xs\">{delivery.deliveryAddress}</p>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </Popup>\n                </Marker>\n              </div>\n            );\n          })}\n\n          {routes?.map((route) => {\n            try {\n              const coordinates = JSON.parse(route.pathCoordinates) as [number, number][];\n              return (\n                <Polyline\n                  key={route._id}\n                  positions={coordinates}\n                  color=\"#2563eb\"\n                  weight={3}\n                  opacity={0.6}\n                />\n              );\n            } catch {\n              return null;\n            }\n          })}\n        </MapContainer>\n\n        <div className=\"absolute top-4 right-4 z-[1000]\">\n          <Card className=\"w-80\">\n            <CardContent className=\"p-4 space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-sm font-medium\">Map Legend</h3>\n              </div>\n              <div className=\"space-y-2 text-xs\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-4 w-4 bg-blue-500 rounded-sm\" />\n                  <span>Vehicles ({vehicles?.length ?? 0})</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-4 w-4 bg-green-500 rounded-sm\" />\n                  <span>Deliveries ({deliveries?.length ?? 0})</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-4 w-4 bg-green-600 rounded-sm\" />\n                  <span>Pickups ({deliveries?.length ?? 0})</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-0.5 w-4 bg-blue-500\" />\n                  <span>Routes ({routes?.filter(r => r.status === \"active\" || r.status === \"completed\").length ?? 0})</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":14182},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport { ThemeToggle } from \"@/components/theme-toggle\";\nimport { useWebSocket } from \"@/hooks/use-websocket\";\nimport Dashboard from \"@/pages/dashboard\";\nimport MapPage from \"@/pages/map\";\nimport VehiclesPage from \"@/pages/vehicles\";\nimport DeliveriesPage from \"@/pages/deliveries\";\nimport RoutesPage from \"@/pages/routes\";\nimport AnalyticsPage from \"@/pages/analytics\";\nimport AlertsPage from \"@/pages/alerts\";\nimport IoTPage from \"@/pages/iot\";\nimport DriverViewPage from \"@/pages/driver-view\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Dashboard} />\n      <Route path=\"/map\" component={MapPage} />\n      <Route path=\"/vehicles\" component={VehiclesPage} />\n      <Route path=\"/deliveries\" component={DeliveriesPage} />\n      <Route path=\"/routes\" component={RoutesPage} />\n      <Route path=\"/analytics\" component={AnalyticsPage} />\n      <Route path=\"/alerts\" component={AlertsPage} />\n      <Route path=\"/iot\" component={IoTPage} />\n      <Route path=\"/driver\" component={DriverViewPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction AppContent() {\n  useWebSocket();\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"flex items-center justify-between p-4 border-b bg-background\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <ThemeToggle />\n          </header>\n          <main className=\"flex-1 overflow-auto p-6\">\n            <Router />\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider defaultTheme=\"light\">\n        <TooltipProvider>\n          <AppContent />\n          <Toaster />\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2576},"client/src/pages/vehicles.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { AddVehicleDialog } from \"@/components/dialogs/add-vehicle-dialog\";\nimport { Truck, Fuel, Gauge, MapPin, Activity } from \"lucide-react\";\nimport type { Vehicle } from \"@shared/schema\";\nimport { formatIST } from \"@/lib/format-time\";\n\nexport default function VehiclesPage() {\n  const [addVehicleOpen, setAddVehicleOpen] = useState(false);\n  const { data: vehicles, isLoading } = useQuery<Vehicle[]>({\n    queryKey: [\"/api/vehicles\"],\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"in-transit\":\n        return \"default\";\n      case \"idle\":\n        return \"secondary\";\n      case \"maintenance\":\n        return \"destructive\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  const getStatusDotColor = (status: string) => {\n    switch (status) {\n      case \"in-transit\":\n        return \"bg-blue-500\";\n      case \"idle\":\n        return \"bg-gray-400\";\n      case \"maintenance\":\n        return \"bg-red-500\";\n      default:\n        return \"bg-green-500\";\n    }\n  };\n\n  const getFuelColor = (level: number) => {\n    if (level > 50) return \"bg-green-500\";\n    if (level > 20) return \"bg-yellow-500\";\n    return \"bg-red-500\";\n  };\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-vehicles\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Vehicle Tracking</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Monitor all vehicles and their real-time telemetry\n          </p>\n        </div>\n        <Button data-testid=\"button-add-vehicle\" onClick={() => setAddVehicleOpen(true)}>\n          <Truck className=\"h-4 w-4 mr-2\" />\n          Add Vehicle\n        </Button>\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Card key={i}>\n              <CardContent className=\"p-6\">\n                <div className=\"h-32 animate-pulse bg-muted rounded\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {vehicles && vehicles.length > 0 ? (\n            vehicles.map((vehicle) => (\n              <Card key={vehicle.id} className=\"hover-elevate\" data-testid={`vehicle-card-${vehicle.id}`}>\n                <CardHeader className=\"flex flex-row items-center justify-between gap-4 space-y-0 pb-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`h-3 w-3 rounded-full ${getStatusDotColor(vehicle.status)}`} />\n                    <div>\n                      <CardTitle className=\"text-base font-medium\">\n                        {vehicle.vehicleNumber}\n                      </CardTitle>\n                      <p className=\"text-xs text-muted-foreground mt-0.5\">\n                        {vehicle.driverName}\n                      </p>\n                    </div>\n                  </div>\n                  <Badge variant={getStatusColor(vehicle.status)} className=\"text-xs\">\n                    {vehicle.status}\n                  </Badge>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div className=\"space-y-1\">\n                      <div className=\"flex items-center gap-1.5 text-muted-foreground\">\n                        <Gauge className=\"h-3.5 w-3.5\" />\n                        <span className=\"text-xs\">Speed</span>\n                      </div>\n                      <p className=\"text-sm font-mono font-medium\">\n                        {vehicle.speed} km/h\n                      </p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <div className=\"flex items-center gap-1.5 text-muted-foreground\">\n                        <Activity className=\"h-3.5 w-3.5\" />\n                        <span className=\"text-xs\">Route</span>\n                      </div>\n                      <p className=\"text-sm font-medium\">\n                        {vehicle.routeCompletion}%\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between text-xs\">\n                      <div className=\"flex items-center gap-1.5 text-muted-foreground\">\n                        <Fuel className=\"h-3.5 w-3.5\" />\n                        <span>Fuel Level</span>\n                      </div>\n                      <span className=\"font-mono font-medium\">{vehicle.fuelLevel}%</span>\n                    </div>\n                    <div className=\"relative h-2 rounded-full bg-muted overflow-hidden\">\n                      <div\n                        className={`h-full ${getFuelColor(vehicle.fuelLevel)} transition-all`}\n                        style={{ width: `${vehicle.fuelLevel}%` }}\n                      />\n                    </div>\n                  </div>\n\n                  {vehicle.routeCompletion > 0 && (\n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between text-xs\">\n                        <span className=\"text-muted-foreground\">Route Progress</span>\n                        <span className=\"font-mono font-medium\">{vehicle.routeCompletion}%</span>\n                      </div>\n                      <Progress value={vehicle.routeCompletion} className=\"h-2\" />\n                    </div>\n                  )}\n\n                  <div className=\"pt-2 border-t space-y-1\">\n                    <div className=\"flex items-center gap-1.5 text-muted-foreground\">\n                      <MapPin className=\"h-3.5 w-3.5\" />\n                      <span className=\"text-xs\">GPS Location</span>\n                    </div>\n                    <p className=\"text-xs font-mono\">\n                      {vehicle.latitude.toFixed(6)}, {vehicle.longitude.toFixed(6)}\n                    </p>\n                    <p className=\"text-xs text-muted-foreground font-mono\">\n                      Last update: {formatIST(vehicle.lastUpdate)}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          ) : (\n            <div className=\"col-span-3 text-center py-12\">\n              <Truck className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n              <p className=\"text-muted-foreground\">No vehicles found</p>\n            </div>\n          )}\n        </div>\n      )}\n      <AddVehicleDialog open={addVehicleOpen} onOpenChange={setAddVehicleOpen} />\n    </div>\n  );\n}\n","size_bytes":7025},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/pages/deliveries.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { NewDeliveryDialog } from \"@/components/dialogs/new-delivery-dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Package, Search, Filter, Plus, MapPin, Clock } from \"lucide-react\";\nimport type { Delivery } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { formatIST } from \"@/lib/format-time\";\n\nexport default function DeliveriesPage() {\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [newDeliveryOpen, setNewDeliveryOpen] = useState(false);\n\n  const { data: deliveries, isLoading } = useQuery<Delivery[]>({\n    queryKey: [\"/api/deliveries\"],\n  });\n\n  const getStatusVariant = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"secondary\";\n      case \"in-transit\":\n        return \"default\";\n      case \"delivered\":\n        return \"default\";\n      case \"delayed\":\n        return \"destructive\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  const getPriorityVariant = (priority: string) => {\n    switch (priority) {\n      case \"high\":\n        return \"destructive\";\n      case \"normal\":\n        return \"secondary\";\n      case \"low\":\n        return \"secondary\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  const filteredDeliveries = deliveries?.filter((delivery) => {\n    const matchesStatus = statusFilter === \"all\" || delivery.status === statusFilter;\n    const matchesSearch =\n      searchQuery === \"\" ||\n      delivery.orderId.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      delivery.customerName.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesStatus && matchesSearch;\n  });\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-deliveries\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Deliveries</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Manage and track all delivery orders\n          </p>\n        </div>\n        <Button data-testid=\"button-new-delivery\" onClick={() => setNewDeliveryOpen(true)}>\n          <Plus className=\"h-4 w-4 mr-2\" />\n          New Delivery\n        </Button>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n            <div className=\"flex-1 max-w-md\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by order ID or customer...\"\n                  className=\"pl-9\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  data-testid=\"input-search-deliveries\"\n                />\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-40\" data-testid=\"select-status-filter\">\n                  <Filter className=\"h-4 w-4 mr-2\" />\n                  <SelectValue placeholder=\"Status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Status</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"in-transit\">In Transit</SelectItem>\n                  <SelectItem value=\"delivered\">Delivered</SelectItem>\n                  <SelectItem value=\"delayed\">Delayed</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"space-y-3\">\n              {[1, 2, 3, 4, 5].map((i) => (\n                <div key={i} className=\"h-16 animate-pulse bg-muted rounded\" />\n              ))}\n            </div>\n          ) : (\n            <div className=\"rounded-md border\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Order ID</TableHead>\n                    <TableHead>Customer</TableHead>\n                    <TableHead>From</TableHead>\n                    <TableHead>To</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Priority</TableHead>\n                    <TableHead>Scheduled</TableHead>\n                    <TableHead>ETA</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredDeliveries && filteredDeliveries.length > 0 ? (\n                    filteredDeliveries.map((delivery) => (\n                      <TableRow\n                        key={delivery.id}\n                        className=\"hover-elevate\"\n                        data-testid={`delivery-row-${delivery.id}`}\n                      >\n                        <TableCell className=\"font-mono font-medium\">\n                          {delivery.orderId}\n                        </TableCell>\n                        <TableCell>{delivery.customerName}</TableCell>\n                        <TableCell className=\"max-w-[200px] truncate\">\n                          <div className=\"flex items-start gap-1.5\">\n                            <MapPin className=\"h-3.5 w-3.5 mt-0.5 text-muted-foreground flex-shrink-0\" />\n                            <span className=\"text-xs\">{delivery.pickupAddress}</span>\n                          </div>\n                        </TableCell>\n                        <TableCell className=\"max-w-[200px] truncate\">\n                          <div className=\"flex items-start gap-1.5\">\n                            <MapPin className=\"h-3.5 w-3.5 mt-0.5 text-muted-foreground flex-shrink-0\" />\n                            <span className=\"text-xs\">{delivery.deliveryAddress}</span>\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <Badge variant={getStatusVariant(delivery.status)}>\n                            {delivery.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          <Badge variant={getPriorityVariant(delivery.priority)}>\n                            {delivery.priority}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"font-mono text-xs\">\n                          {delivery.scheduledTime\n                            ? formatIST(delivery.scheduledTime)\n                            : \"-\"}\n                        </TableCell>\n                        <TableCell className=\"font-mono text-xs\">\n                          {delivery.estimatedDeliveryTime\n                            ? formatIST(delivery.estimatedDeliveryTime)\n                            : \"-\"}\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  ) : (\n                    <TableRow>\n                      <TableCell colSpan={8} className=\"text-center py-12\">\n                        <Package className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                        <p className=\"text-muted-foreground\">No deliveries found</p>\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n      <NewDeliveryDialog open={newDeliveryOpen} onOpenChange={setNewDeliveryOpen} />\n    </div>\n  );\n}\n","size_bytes":8139},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/dialogs/add-vehicle-dialog.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertVehicleSchema } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface AddVehicleDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nexport function AddVehicleDialog({ open, onOpenChange }: AddVehicleDialogProps) {\n  const { toast } = useToast();\n  const form = useForm({\n    resolver: zodResolver(insertVehicleSchema),\n    defaultValues: {\n      vehicleNumber: \"\",\n      driverName: \"\",\n      status: \"idle\",\n      latitude: 22.2369, // Rourkela, Odisha\n      longitude: 84.8549, // Rourkela, Odisha\n      speed: 0,\n      fuelLevel: 100,\n      routeCompletion: 0,\n    },\n  });\n\n  const addVehicleMutation = useMutation({\n    mutationFn: async (data: typeof form.getValues) => {\n      return apiRequest(\"POST\", \"/api/vehicles\", data);\n    },\n    onSuccess: async () => {\n      // Invalidate and immediately refetch all related queries\n      await queryClient.refetchQueries({ queryKey: [\"/api/vehicles\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/metrics\"] });\n      \n      toast({\n        title: \"Success\",\n        description: \"Vehicle added successfully!\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add vehicle. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Add New Vehicle</DialogTitle>\n          <DialogDescription>\n            Enter the vehicle details to add it to your fleet.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit((data: any) => addVehicleMutation.mutate(data))} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"vehicleNumber\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Vehicle Number</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., VH-1001\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"driverName\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Driver Name</FormLabel>\n                  <FormControl>\n                    <Input placeholder=\"e.g., John Doe\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"fuelLevel\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Fuel Level (%)</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" min=\"0\" max=\"100\" {...field} onChange={(e) => field.onChange(Number(e.target.value))} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex gap-2 justify-end\">\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={addVehicleMutation.isPending}>\n                {addVehicleMutation.isPending ? \"Adding...\" : \"Add Vehicle\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":4295},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 9%;\n  --border: 0 0% 90%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 9%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 9%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 217 91% 45%;\n  --sidebar-primary-foreground: 217 91% 98%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 9%;\n  --sidebar-ring: 217 91% 45%;\n  --popover: 0 0% 94%;\n  --popover-foreground: 0 0% 9%;\n  --popover-border: 0 0% 90%;\n  --primary: 217 91% 45%;\n  --primary-foreground: 217 91% 98%;\n  --secondary: 0 0% 91%;\n  --secondary-foreground: 0 0% 9%;\n  --muted: 217 8% 93%;\n  --muted-foreground: 217 8% 35%;\n  --accent: 217 12% 94%;\n  --accent-foreground: 217 12% 9%;\n  --destructive: 0 84% 42%;\n  --destructive-foreground: 0 84% 98%;\n  --input: 0 0% 70%;\n  --ring: 217 91% 45%;\n  --chart-1: 217 91% 35%;\n  --chart-2: 195 76% 38%;\n  --chart-3: 142 71% 35%;\n  --chart-4: 37 92% 45%;\n  --chart-5: 280 65% 42%;\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 0 0% 8%;\n  --foreground: 0 0% 96%;\n  --border: 0 0% 18%;\n  --card: 0 0% 10%;\n  --card-foreground: 0 0% 96%;\n  --card-border: 0 0% 13%;\n  --sidebar: 0 0% 12%;\n  --sidebar-foreground: 0 0% 96%;\n  --sidebar-border: 0 0% 15%;\n  --sidebar-primary: 217 91% 55%;\n  --sidebar-primary-foreground: 217 91% 98%;\n  --sidebar-accent: 0 0% 15%;\n  --sidebar-accent-foreground: 0 0% 96%;\n  --sidebar-ring: 217 91% 55%;\n  --popover: 0 0% 14%;\n  --popover-foreground: 0 0% 96%;\n  --popover-border: 0 0% 17%;\n  --primary: 217 91% 32%;\n  --primary-foreground: 217 91% 98%;\n  --secondary: 0 0% 17%;\n  --secondary-foreground: 0 0% 96%;\n  --muted: 217 8% 16%;\n  --muted-foreground: 217 8% 68%;\n  --accent: 217 12% 16%;\n  --accent-foreground: 217 12% 96%;\n  --destructive: 0 84% 32%;\n  --destructive-foreground: 0 84% 98%;\n  --input: 0 0% 30%;\n  --ring: 217 91% 55%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 195 76% 62%;\n  --chart-3: 142 71% 65%;\n  --chart-4: 37 92% 68%;\n  --chart-5: 280 65% 68%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n","size_bytes":10560},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/pages/driver-view.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MapPin, Navigation, Phone, AlertCircle, CheckCircle2 } from \"lucide-react\";\nimport { formatIST } from \"@/lib/format-time\";\n\ninterface Vehicle {\n  id: string;\n  vehicleNumber: string;\n  driverName: string;\n  latitude: number;\n  longitude: number;\n  speed: number;\n  fuelLevel: number;\n  status: string;\n  currentRouteId: string | null;\n  routeCompletion: number;\n}\n\ninterface GpsCoordinates {\n  latitude: number;\n  longitude: number;\n  accuracy: number;\n  timestamp: number;\n}\n\nconst VEHICLE_ID = \"driver-vehicle-default\"; // Default vehicle ID for driver\n\nexport default function DriverView() {\n  const [isTracking, setIsTracking] = useState(false);\n  const [gpsCoords, setGpsCoords] = useState<GpsCoordinates | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [watchId, setWatchId] = useState<number | null>(null);\n\n  // Fetch current vehicle (driver's assigned vehicle)\n  const { data: vehicles = [] } = useQuery({\n    queryKey: [\"/api/vehicles\"],\n    refetchInterval: 5000,\n  });\n\n  const currentVehicle = (vehicles as Vehicle[])?.[0];\n\n  // Mutation to update vehicle location from GPS\n  const updateLocationMutation = useMutation({\n    mutationFn: async (coords: GpsCoordinates) => {\n      if (!currentVehicle) return;\n      \n      return apiRequest(\"PATCH\", `/api/vehicles/${currentVehicle.id}`, {\n        latitude: coords.latitude,\n        longitude: coords.longitude,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/vehicles\"] });\n    },\n  });\n\n  // Start GPS tracking\n  const startTracking = () => {\n    setError(null);\n\n    if (!navigator.geolocation) {\n      setError(\"Geolocation is not supported by your browser\");\n      return;\n    }\n\n    // Request high-accuracy GPS\n    const id = navigator.geolocation.watchPosition(\n      (position) => {\n        const coords: GpsCoordinates = {\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          accuracy: position.coords.accuracy,\n          timestamp: position.timestamp,\n        };\n\n        setGpsCoords(coords);\n        setError(null);\n\n        // Update vehicle location in real-time\n        updateLocationMutation.mutate(coords);\n      },\n      (err) => {\n        let errorMsg = \"Unable to retrieve GPS location\";\n\n        if (err.code === 1) {\n          errorMsg = \"Permission denied. Please allow location access.\";\n        } else if (err.code === 2) {\n          errorMsg = \"Position unavailable. Check your GPS signal.\";\n        } else if (err.code === 3) {\n          errorMsg = \"Request timeout. Please try again.\";\n        }\n\n        setError(errorMsg);\n        setIsTracking(false);\n      },\n      {\n        enableHighAccuracy: true,\n        maximumAge: 0,\n        timeout: 10000,\n      }\n    );\n\n    setWatchId(id);\n    setIsTracking(true);\n  };\n\n  // Stop GPS tracking\n  const stopTracking = () => {\n    if (watchId !== null) {\n      navigator.geolocation.clearWatch(watchId);\n      setWatchId(null);\n    }\n    setIsTracking(false);\n  };\n\n  useEffect(() => {\n    return () => {\n      // Cleanup: stop tracking when component unmounts\n      if (watchId !== null) {\n        navigator.geolocation.clearWatch(watchId);\n      }\n    };\n  }, [watchId]);\n\n  if (!currentVehicle) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <AlertCircle className=\"w-5 h-5 text-yellow-600\" />\n              No Vehicle Assigned\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground\">\n              Please contact your dispatcher to assign a vehicle to this driver account.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col gap-6 p-4 md:p-6 max-w-2xl mx-auto\">\n      <div className=\"text-center\">\n        <h1 className=\"text-3xl font-bold\">Driver View</h1>\n        <p className=\"text-muted-foreground\">Real-time GPS tracking for deliveries</p>\n      </div>\n\n      {/* Vehicle Info */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <span>{currentVehicle.vehicleNumber}</span>\n            <Badge variant={currentVehicle.status === \"in-transit\" ? \"default\" : \"secondary\"}>\n              {currentVehicle.status}\n            </Badge>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <p className=\"text-sm font-medium\">Driver</p>\n            <p className=\"text-lg\">{currentVehicle.driverName}</p>\n          </div>\n\n          {currentVehicle.currentRouteId && (\n            <div className=\"space-y-2\">\n              <p className=\"text-sm font-medium\">Route Progress</p>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex-1 bg-muted rounded-full h-2\">\n                  <div\n                    className=\"bg-primary h-2 rounded-full transition-all\"\n                    style={{ width: `${currentVehicle.routeCompletion}%` }}\n                  />\n                </div>\n                <span className=\"text-sm font-medium\">{Math.round(currentVehicle.routeCompletion)}%</span>\n              </div>\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-3 gap-3 pt-2\">\n            <div>\n              <p className=\"text-xs text-muted-foreground\">Speed</p>\n              <p className=\"text-lg font-semibold\">{currentVehicle.speed} km/h</p>\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground\">Fuel Level</p>\n              <p className=\"text-lg font-semibold\">{Math.round(currentVehicle.fuelLevel)}%</p>\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground\">Status</p>\n              <p className=\"text-lg font-semibold capitalize\">{currentVehicle.status}</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* GPS Status */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Navigation className=\"w-5 h-5\" />\n            GPS Status\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {error && (\n            <div className=\"p-3 bg-red-50 dark:bg-red-950 text-red-800 dark:text-red-200 rounded-md flex items-start gap-2\">\n              <AlertCircle className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n              <p className=\"text-sm\">{error}</p>\n            </div>\n          )}\n\n          {gpsCoords && (\n            <div className=\"space-y-3 p-3 bg-green-50 dark:bg-green-950 rounded-md\">\n              <div className=\"flex items-center gap-2 text-green-800 dark:text-green-200\">\n                <CheckCircle2 className=\"w-4 h-4\" />\n                <p className=\"text-sm font-medium\">GPS Connected</p>\n              </div>\n              <div className=\"grid grid-cols-2 gap-2 text-xs\">\n                <div>\n                  <p className=\"text-green-700 dark:text-green-300\">Latitude</p>\n                  <p className=\"font-mono text-green-900 dark:text-green-100\">{gpsCoords.latitude.toFixed(6)}</p>\n                </div>\n                <div>\n                  <p className=\"text-green-700 dark:text-green-300\">Longitude</p>\n                  <p className=\"font-mono text-green-900 dark:text-green-100\">{gpsCoords.longitude.toFixed(6)}</p>\n                </div>\n                <div className=\"col-span-2\">\n                  <p className=\"text-green-700 dark:text-green-300\">Accuracy</p>\n                  <p className=\"font-mono text-green-900 dark:text-green-100\">{Math.round(gpsCoords.accuracy)} meters</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {!isTracking && (\n            <div className=\"text-center text-sm text-muted-foreground\">\n              {gpsCoords ? \"GPS paused\" : \"GPS not started\"}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Current Location Display */}\n      {gpsCoords && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <MapPin className=\"w-5 h-5\" />\n              Current Location\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <p className=\"text-sm text-muted-foreground\">\n                Your real-time location is being sent to the dashboard every few seconds.\n              </p>\n              <div className=\"p-3 bg-muted rounded-md font-mono text-xs break-all\">\n                {gpsCoords.latitude.toFixed(6)}, {gpsCoords.longitude.toFixed(6)}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Last updated: {formatIST(new Date(gpsCoords.timestamp))}\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Control Buttons */}\n      <div className=\"flex gap-3\">\n        <Button\n          onClick={startTracking}\n          disabled={isTracking}\n          size=\"lg\"\n          className=\"flex-1\"\n          data-testid=\"button-start-driving\"\n        >\n          <Navigation className=\"w-4 h-4 mr-2\" />\n          Start Driving\n        </Button>\n        <Button\n          onClick={stopTracking}\n          disabled={!isTracking}\n          variant=\"outline\"\n          size=\"lg\"\n          className=\"flex-1\"\n          data-testid=\"button-stop-driving\"\n        >\n          <Phone className=\"w-4 h-4 mr-2\" />\n          Stop Tracking\n        </Button>\n      </div>\n\n      {/* Info Box */}\n      <Card className=\"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800\">\n        <CardContent className=\"pt-6\">\n          <p className=\"text-sm text-blue-900 dark:text-blue-100\">\n            <strong>How it works:</strong> When you click \"Start Driving\", your phone's GPS will be used to\n            track your real-time location. Your dispatcher can see your location on the dashboard map in\n            real-time. Make sure location permissions are enabled for your browser.\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":10677},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"server/index-prod.ts":{"content":"import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"node:http\";\n\nimport express, { type Express } from \"express\";\nimport runApp from \"./app\";\n\nexport async function serveStatic(app: Express, _server: Server) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n\n(async () => {\n  await runApp(serveStatic);\n})();\n","size_bytes":712},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\";\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState | undefined>(\n  undefined\n);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"light\",\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    const stored = localStorage.getItem(\"theme\") as Theme | null;\n    return stored || defaultTheme;\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  return (\n    <ThemeProviderContext.Provider value={{ theme, setTheme }}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n  if (context === undefined) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n  return context;\n};\n","size_bytes":1170},"server/index-dev.ts":{"content":"import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"node:http\";\n\nimport { nanoid } from \"nanoid\";\nimport { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\n\nimport viteConfig from \"../vite.config\";\nimport runApp from \"./app\";\n\nexport async function setupVite(app: Express, server: Server) {\n  const viteLogger = createLogger();\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\n(async () => {\n  await runApp(setupVite);\n})();\n","size_bytes":1609},"server/app.ts":{"content":"import { type Server } from \"node:http\";\n\nimport express, {\n  type Express,\n  type Request,\n  Response,\n  NextFunction,\n} from \"express\";\n\nimport { registerRoutes } from \"./routes\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport const app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\nexport default async function runApp(\n  setup: (app: Express, server: Server) => Promise<void>,\n) {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly run the final setup after setting up all the other routes so\n  // the catch-all route doesn't interfere with the other routes\n  await setup(app, server);\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5001 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5001', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n}\n","size_bytes":2482},"client/src/pages/alerts.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  AlertTriangle,\n  AlertCircle,\n  Info,\n  CheckCircle2,\n  Bell,\n  BellOff,\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport type { Alert } from \"@shared/schema\";\n\nexport default function AlertsPage() {\n  const { toast } = useToast();\n  const { data: alerts = [], isLoading, refetch } = useQuery<Alert[]>({\n    queryKey: [\"/api/alerts\"],\n    refetchInterval: 3000, // Real-time refresh every 3 seconds\n  });\n\n  const dismissMutation = useMutation({\n    mutationFn: async (alertId: string) => {\n      return apiRequest(\"DELETE\", `/api/alerts/${alertId}`);\n    },\n    onSuccess: async () => {\n      // Refetch alerts after dismissal for immediate update\n      await queryClient.refetchQueries({ queryKey: [\"/api/alerts\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/metrics\"] });\n      \n      toast({\n        title: \"Alert dismissed\",\n        description: \"The alert has been removed.\",\n      });\n    },\n    onError: (error: any) => {\n      console.error(\"Dismiss alert error:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to dismiss alert. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const markAllReadMutation = useMutation({\n    mutationFn: async () => {\n      return apiRequest(\"PATCH\", \"/api/alerts/mark-all-read\", {});\n    },\n    onSuccess: async (data: any) => {\n      // Refetch alerts for immediate update\n      await queryClient.refetchQueries({ queryKey: [\"/api/alerts\"] });\n      await queryClient.refetchQueries({ queryKey: [\"/api/metrics\"] });\n      \n      toast({\n        title: \"Success\",\n        description: `${data.count} alerts marked as read.`,\n      });\n    },\n    onError: (error: any) => {\n      console.error(\"Mark all read error:\", error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to mark alerts as read.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleMarkAllRead = () => {\n    markAllReadMutation.mutate();\n  };\n\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return AlertTriangle;\n      case \"warning\":\n        return AlertCircle;\n      case \"info\":\n        return Info;\n      default:\n        return Bell;\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"text-red-600\";\n      case \"warning\":\n        return \"text-yellow-600\";\n      case \"info\":\n        return \"text-blue-600\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  const getSeverityBg = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-900\";\n      case \"warning\":\n        return \"bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-900\";\n      case \"info\":\n        return \"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-900\";\n      default:\n        return \"bg-muted\";\n    }\n  };\n\n  const getSeverityVariant = (severity: string) => {\n    switch (severity) {\n      case \"critical\":\n        return \"destructive\";\n      case \"warning\":\n        return \"default\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  const criticalAlerts = alerts?.filter((a) => a.severity === \"critical\");\n  const warningAlerts = alerts?.filter((a) => a.severity === \"warning\");\n  const infoAlerts = alerts?.filter((a) => a.severity === \"info\");\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-alerts\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Alerts & Notifications</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Monitor system alerts and delivery status changes\n          </p>\n        </div>\n        <Button \n          variant=\"outline\" \n          data-testid=\"button-mark-all-read\" \n          onClick={handleMarkAllRead}\n          disabled={markAllReadMutation.isPending || alerts.length === 0}\n        >\n          <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n          {markAllReadMutation.isPending ? \"Marking...\" : \"Mark All as Read\"}\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-3\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Critical\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2 text-red-600\">\n                  {criticalAlerts?.length ?? 0}\n                </h3>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-red-100 dark:bg-red-950/20\">\n                <AlertTriangle className=\"h-6 w-6 text-red-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Warnings\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2 text-yellow-600\">\n                  {warningAlerts?.length ?? 0}\n                </h3>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-yellow-100 dark:bg-yellow-950/20\">\n                <AlertCircle className=\"h-6 w-6 text-yellow-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Info\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2 text-blue-600\">\n                  {infoAlerts?.length ?? 0}\n                </h3>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-blue-100 dark:bg-blue-950/20\">\n                <Info className=\"h-6 w-6 text-blue-600\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base font-medium\">Alert Feed</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Tabs defaultValue=\"all\" className=\"w-full\">\n            <TabsList>\n              <TabsTrigger value=\"all\" data-testid=\"tab-all-alerts\">\n                All ({alerts?.length ?? 0})\n              </TabsTrigger>\n              <TabsTrigger value=\"critical\" data-testid=\"tab-critical-alerts\">\n                Critical ({criticalAlerts?.length ?? 0})\n              </TabsTrigger>\n              <TabsTrigger value=\"warning\" data-testid=\"tab-warning-alerts\">\n                Warnings ({warningAlerts?.length ?? 0})\n              </TabsTrigger>\n              <TabsTrigger value=\"info\" data-testid=\"tab-info-alerts\">\n                Info ({infoAlerts?.length ?? 0})\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"all\" className=\"mt-6\">\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3, 4, 5].map((i) => (\n                    <div key={i} className=\"h-20 animate-pulse bg-muted rounded\" />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {alerts && alerts.length > 0 ? (\n                    alerts.map((alert) => {\n                      const Icon = getSeverityIcon(alert.severity);\n                      return (\n                        <div\n                          key={alert.id}\n                          className={`flex items-start gap-4 rounded-md border p-4 ${getSeverityBg(\n                            alert.severity\n                          )} ${!alert.isRead ? \"font-medium\" : \"\"}`}\n                          data-testid={`alert-item-${alert.id}`}\n                        >\n                          <Icon className={`h-5 w-5 mt-0.5 ${getSeverityColor(alert.severity)}`} />\n                          <div className=\"flex-1 space-y-2\">\n                            <div className=\"flex items-start justify-between gap-4\">\n                              <p className=\"text-sm\">{alert.message}</p>\n                              {!alert.isRead && (\n                                <Badge variant=\"secondary\" className=\"text-xs shrink-0\">\n                                  New\n                                </Badge>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                              <Badge variant={getSeverityVariant(alert.severity)} className=\"text-xs\">\n                                {alert.severity}\n                              </Badge>\n                              <span className=\"font-mono\">\n                                {new Date(alert.createdAt).toLocaleString()}\n                              </span>\n                              {alert.vehicleId && (\n                                <span className=\"font-mono\">Vehicle: {alert.vehicleId.slice(0, 8)}</span>\n                              )}\n                            </div>\n                          </div>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            data-testid={`button-dismiss-${alert._id}`}\n                            onClick={() => dismissMutation.mutate(alert._id)}\n                            disabled={dismissMutation.isPending}\n                          >\n                            <BellOff className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      );\n                    })\n                  ) : (\n                    <div className=\"text-center py-12 text-muted-foreground\">\n                      <Bell className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                      <p>No alerts to display</p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"critical\" className=\"mt-6\">\n              <div className=\"space-y-3\">\n                {criticalAlerts && criticalAlerts.length > 0 ? (\n                  criticalAlerts.map((alert) => {\n                    const Icon = getSeverityIcon(alert.severity);\n                    return (\n                      <div\n                        key={alert._id}\n                        className={`flex items-start gap-4 rounded-md border p-4 ${getSeverityBg(\n                          alert.severity\n                        )}`}\n                      >\n                        <Icon className={`h-5 w-5 mt-0.5 ${getSeverityColor(alert.severity)}`} />\n                        <div className=\"flex-1 space-y-2\">\n                          <p className=\"text-sm font-medium\">{alert.message}</p>\n                          <p className=\"text-xs text-muted-foreground font-mono\">\n                            {new Date(alert.createdAt).toLocaleString()}\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  })\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\">\n                    <CheckCircle2 className=\"h-12 w-12 mx-auto mb-4 text-green-600\" />\n                    <p>No critical alerts</p>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"warning\" className=\"mt-6\">\n              <div className=\"space-y-3\">\n                {warningAlerts && warningAlerts.length > 0 ? (\n                  warningAlerts.map((alert) => {\n                    const Icon = getSeverityIcon(alert.severity);\n                    return (\n                      <div\n                        key={alert._id}\n                        className={`flex items-start gap-4 rounded-md border p-4 ${getSeverityBg(\n                          alert.severity\n                        )}`}\n                      >\n                        <Icon className={`h-5 w-5 mt-0.5 ${getSeverityColor(alert.severity)}`} />\n                        <div className=\"flex-1 space-y-2\">\n                          <p className=\"text-sm\">{alert.message}</p>\n                          <p className=\"text-xs text-muted-foreground font-mono\">\n                            {new Date(alert.createdAt).toLocaleString()}\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  })\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\">\n                    <CheckCircle2 className=\"h-12 w-12 mx-auto mb-4 text-green-600\" />\n                    <p>No warning alerts</p>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"info\" className=\"mt-6\">\n              <div className=\"space-y-3\">\n                {infoAlerts && infoAlerts.length > 0 ? (\n                  infoAlerts.map((alert) => {\n                    const Icon = getSeverityIcon(alert.severity);\n                    return (\n                      <div\n                        key={alert._id}\n                        className={`flex items-start gap-4 rounded-md border p-4 ${getSeverityBg(\n                          alert.severity\n                        )}`}\n                      >\n                        <Icon className={`h-5 w-5 mt-0.5 ${getSeverityColor(alert.severity)}`} />\n                        <div className=\"flex-1 space-y-2\">\n                          <p className=\"text-sm\">{alert.message}</p>\n                          <p className=\"text-xs text-muted-foreground font-mono\">\n                            {new Date(alert.createdAt).toLocaleString()}\n                          </p>\n                        </div>\n                      </div>\n                    );\n                  })\n                ) : (\n                  <div className=\"text-center py-12 text-muted-foreground\">\n                    <Info className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                    <p>No info alerts</p>\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":15141},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"GPS_DRIVER_SETUP.md":{"content":"# Driver View GPS Setup Guide\n\n## Overview\nThe Smart Delivery System includes a **Driver View** page that captures real GPS coordinates from drivers' phones and displays them live on the dashboard map.\n\n## How It Works\n\n1. **Driver View Page** (`/driver` route)\n   - Mobile-friendly interface designed for phones\n   - Uses the phone's built-in GPS sensor\n   - Displays real coordinates in degrees (latitude, longitude)\n   - Shows accuracy levels and connection status\n\n2. **Real-time Location Updates**\n   - When you click \"Start Driving\", GPS tracking begins\n   - Your location is sent to the dashboard every few seconds\n   - The dashboard map updates with your real position in real-time\n   - Dispatchers see all driver locations simultaneously\n\n3. **Data Flow**\n   ```\n   Phone GPS  Browser GeolocationAPI  Driver View Page  Vehicle Location Update  Dashboard Map\n   ```\n\n## Step-by-Step Setup\n\n### On Mobile Device (Driver)\n\n1. **Open Driver View Page**\n   - On your phone, go to: `https://your-app-url/driver`\n   - You'll see the Driver View with your assigned vehicle info\n\n2. **Enable Location Permission**\n   - When prompted, allow the app to access your location\n   - For best accuracy, choose \"Allow while using the app\"\n   - This uses your phone's GPS sensor (not cell towers)\n\n3. **Start Driving**\n   - Click the **\"Start Driving\"** button\n   - You'll see:\n     - Green checkmark: \"GPS Connected\"\n     - Real latitude/longitude coordinates\n     - Accuracy X meters\n     - Last update timestamp\n\n4. **Monitor During Delivery**\n   - Your position updates automatically every 3-5 seconds\n   - Watch the route completion percentage\n   - Keep the page open during deliveries\n\n5. **Stop Tracking**\n   - Click **\"Stop Tracking\"** when done\n   - This pauses GPS updates (useful to save battery)\n\n### On Dashboard (Dispatcher)\n\n1. **View Live Map** (Go to `/map`)\n   - See all driver locations as blue truck icons\n   - Drivers appear as they move in real-time\n   - Click on any vehicle to see:\n     - Driver name\n     - Current speed\n     - Fuel level\n     - Exact GPS coordinates\n     - Status (in-transit/idle)\n\n2. **Track Driver Progress**\n   - Click \"Optimize Routes\" to assign deliveries to drivers\n   - Routes appear as blue lines on the map\n   - Watch drivers move along their assigned routes\n   - See route completion percentage\n\n3. **Receive Real-time Updates**\n   - Dashboard updates every 3 seconds as drivers move\n   - No manual refresh needed\n   - Automatic scroll/zoom to fit all drivers\n\n## Technical Details\n\n### GPS Accuracy\n- **Desktop/Simulator**: May use IP-based location (less accurate)\n- **Real Phone with GPS**:\n  - Accuracy: 5-10 meters typical\n  - Requires clear sky view for best results\n  - Uses multiple satellite signals\n\n### Device Requirements\n- **iOS**: Safari browser with iOS 13+ \n- **Android**: Chrome browser with Android 5+\n- **Requirements**:\n  - Location permission enabled\n  - HTTPS connection (not HTTP)\n  - Active internet connection\n  - GPS sensor enabled on phone\n\n### Data Privacy\n- Location data is only sent while the driver has the page open\n- Data updates every 3-5 seconds (configurable)\n- No continuous background tracking\n- Driver can pause anytime with \"Stop Tracking\"\n\n## Real Phone Testing on Replit\n\nSince Replit preview URLs work on any phone:\n\n1. **Get Your App URL**\n   - Look at the browser address bar in Replit\n   - It looks like: `https://bdce0dae-1574-xxxx.spock.replit.dev`\n\n2. **On Your Phone**\n   - Open Chrome/Safari\n   - Paste the URL in address bar\n   - Add `/driver` at the end\n   - Full URL: `https://bdce0dae-1574-xxxx.spock.replit.dev/driver`\n\n3. **Grant Permissions**\n   - Browser asks for location permission\n   - Tap \"Allow\"\n   - Choose \"Allow while using the app\"\n\n4. **Start Driving**\n   - Click \"Start Driving\" button\n   - Your phone's real GPS coordinates will appear\n   - Check the dashboard on desktop to see live updates\n\n5. **Back on Desktop Dashboard**\n   - Go to `/map`\n   - See your phone's GPS location as blue truck marker\n   - It updates every 3 seconds as you move\n   - Try moving around and watch the marker follow\n\n## Troubleshooting\n\n### \"GPS Not Starting\"\n- **Issue**: Permission denied\n- **Solution**: Allow location permission in browser settings\n- **iOS**: Settings  Websites  Location\n- **Android**: Tap lock icon in address bar  Location  Allow\n\n### \"Coordinates Not Updating\"\n- **Issue**: No internet connection\n- **Solution**: Ensure strong WiFi or mobile data\n- **Check**: Look at \"Last updated\" timestamp\n\n### \"Accuracy Says 'Unknown'\"\n- **Issue**: GPS signal weak (indoors)\n- **Solution**: Go outside, wait 30 seconds for satellite lock\n- **Typical**: Takes 10-30 seconds to acquire lock\n\n### \"Phone Coordinates Don't Match Map\"\n- **Issue**: GPS still acquiring signal\n- **Solution**: Wait 1-2 minutes for better accuracy\n- **Normal**: First reading may be 100+ meters off\n\n## API Endpoints Used\n\nThe Driver View uses these endpoints:\n\n```javascript\n// Get vehicle data (reads first vehicle in system)\nGET /api/vehicles\n\n// Update vehicle location from GPS\nPATCH /api/vehicles/{vehicleId}\n  {\n    \"latitude\": 22.1234,\n    \"longitude\": 84.5678\n  }\n```\n\n## Example Workflow\n\n1. **Dispatcher**:\n   - Opens Dashboard at `/map`\n   - Clicks \"Optimize Routes\"\n   - Sees blue route lines drawn on map\n   - Waits for drivers to connect\n\n2. **Driver 1**:\n   - Opens Driver View at `/driver`\n   - Clicks \"Start Driving\"\n   - GPS location appears on dispatcher's map\n   - Dispatcher can see real-time movement\n\n3. **Driver 2**:\n   - Joins the same way\n   - Both drivers visible on map simultaneously\n   - Dispatcher tracks both in real-time\n   - Routes show completion percentage\n\n4. **Real-time Monitoring**:\n   - As drivers move, map updates every 3 seconds\n   - Dispatcher sees current location, speed, fuel level\n   - Alerts fire if something goes wrong\n   - Can track multiple drivers at once\n\n## Multiple Driver Setup\n\nFor testing with multiple drivers:\n\n1. **Open 2+ Browser Tabs/Phones**\n   - Tab 1: `/driver` for Driver 1\n   - Tab 2: `/driver` for Driver 2\n   - Desktop: `/map` for Dashboard\n\n2. **Each Tab Gets Same First Vehicle**\n   - Both send GPS to same vehicle initially\n   - In production, each driver would have unique ID\n   - Currently uses first vehicle in database\n\n3. **See Real-time Sync**\n   - Start driving on Tab 1\n   - Watch Dashboard update\n   - Start on Tab 2\n   - See both locations update simultaneously\n\n## Production Deployment\n\nWhen deploying to production:\n\n1. **Use HTTPS only** (required for GPS)\n2. **Assign unique vehicles** to each driver (currently prototype uses first vehicle)\n3. **Enable background location** if continuous tracking needed\n4. **Set up alerts** for delivery delays/issues\n5. **Configure battery optimization** for long routes\n\n## Questions?\n\nRefer to:\n- **Map not showing all markers?** Click \"Fit All\" button\n- **Routes not optimizing?** Check that vehicles exist and deliveries are \"pending\"\n- **GPS not working?** Verify location permission and internet connection\n- **Want more accuracy?** Use real phone GPS (not simulator)\n","size_bytes":7115},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/pages/routes.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { OptimizeRouteDialog } from \"@/components/dialogs/optimize-route-dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Route as RouteIcon, Plus, Zap, Navigation, Clock, DollarSign, TrendingUp } from \"lucide-react\";\nimport type { Route } from \"@shared/schema\";\nimport { formatIST } from \"@/lib/format-time\";\n\nexport default function RoutesPage() {\n  const [optimizeOpen, setOptimizeOpen] = useState(false);\n  const { data: routes, isLoading } = useQuery<Route[]>({\n    queryKey: [\"/api/routes\"],\n  });\n\n  const getStatusVariant = (status: string) => {\n    switch (status) {\n      case \"planned\":\n        return \"secondary\";\n      case \"active\":\n        return \"default\";\n      case \"completed\":\n        return \"default\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  const getAlgorithmColor = (algorithm: string) => {\n    switch (algorithm) {\n      case \"dijkstra\":\n        return \"bg-blue-500\";\n      case \"astar\":\n        return \"bg-purple-500\";\n      default:\n        return \"bg-gray-500\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"page-routes\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Route Optimization</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            Optimize delivery routes using advanced algorithms\n          </p>\n        </div>\n        <Button data-testid=\"button-optimize-route\" onClick={() => setOptimizeOpen(true)}>\n          <Zap className=\"h-4 w-4 mr-2\" />\n          Optimize New Route\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 md:grid-cols-3\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Avg Distance\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">42.5 km</h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">Per route</p>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <Navigation className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Avg Duration\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">68 min</h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">Per route</p>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <Clock className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <p className=\"text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                  Cost Savings\n                </p>\n                <h3 className=\"text-3xl font-bold mt-2\">23%</h3>\n                <p className=\"text-xs text-muted-foreground mt-1\">vs manual routing</p>\n              </div>\n              <div className=\"flex h-12 w-12 items-center justify-center rounded-md bg-primary/10\">\n                <TrendingUp className=\"h-6 w-6 text-primary\" />\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base font-medium\">Route Optimization Algorithms</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Tabs defaultValue=\"all\" className=\"w-full\">\n            <TabsList>\n              <TabsTrigger value=\"all\" data-testid=\"tab-all-routes\">All Routes</TabsTrigger>\n              <TabsTrigger value=\"dijkstra\" data-testid=\"tab-dijkstra\">Dijkstra</TabsTrigger>\n              <TabsTrigger value=\"astar\" data-testid=\"tab-astar\">A* Algorithm</TabsTrigger>\n            </TabsList>\n            <TabsContent value=\"all\" className=\"mt-6\">\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3, 4].map((i) => (\n                    <div key={i} className=\"h-16 animate-pulse bg-muted rounded\" />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"rounded-md border\">\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Route Name</TableHead>\n                        <TableHead>Algorithm</TableHead>\n                        <TableHead>Distance</TableHead>\n                        <TableHead>Duration</TableHead>\n                        <TableHead>Cost</TableHead>\n                        <TableHead>Waypoints</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Created</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {routes && routes.length > 0 ? (\n                        routes.map((route) => {\n                          let waypointCount = 0;\n                          try {\n                            waypointCount = JSON.parse(route.waypoints).length;\n                          } catch {}\n\n                          return (\n                            <TableRow\n                              key={route.id}\n                              className=\"hover-elevate\"\n                              data-testid={`route-row-${route.id}`}\n                            >\n                              <TableCell className=\"font-medium\">{route.name}</TableCell>\n                              <TableCell>\n                                <div className=\"flex items-center gap-2\">\n                                  <div\n                                    className={`h-2 w-2 rounded-full ${getAlgorithmColor(\n                                      route.algorithm\n                                    )}`}\n                                  />\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\n                                    {route.algorithm.toUpperCase()}\n                                  </Badge>\n                                </div>\n                              </TableCell>\n                              <TableCell className=\"font-mono text-sm\">\n                                {route.totalDistance.toFixed(1)} km\n                              </TableCell>\n                              <TableCell className=\"font-mono text-sm\">\n                                {Math.floor(route.estimatedDuration / 60)} min\n                              </TableCell>\n                              <TableCell className=\"font-mono text-sm\">\n                                ${route.estimatedCost.toFixed(2)}\n                              </TableCell>\n                              <TableCell className=\"font-mono text-sm\">\n                                {waypointCount} stops\n                              </TableCell>\n                              <TableCell>\n                                <Badge variant={getStatusVariant(route.status)}>\n                                  {route.status}\n                                </Badge>\n                              </TableCell>\n                              <TableCell className=\"font-mono text-xs\">\n                                {formatIST(route.createdAt)}\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })\n                      ) : (\n                        <TableRow>\n                          <TableCell colSpan={8} className=\"text-center py-12\">\n                            <RouteIcon className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50\" />\n                            <p className=\"text-muted-foreground\">No routes found</p>\n                          </TableCell>\n                        </TableRow>\n                      )}\n                    </TableBody>\n                  </Table>\n                </div>\n              )}\n            </TabsContent>\n            <TabsContent value=\"dijkstra\" className=\"mt-6\">\n              <div className=\"text-center py-12 text-muted-foreground\">\n                <RouteIcon className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p>Dijkstra algorithm routes will appear here</p>\n              </div>\n            </TabsContent>\n            <TabsContent value=\"astar\" className=\"mt-6\">\n              <div className=\"text-center py-12 text-muted-foreground\">\n                <RouteIcon className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p>A* algorithm routes will appear here</p>\n              </div>\n            </TabsContent>\n          </Tabs>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base font-medium\">Algorithm Performance Comparison</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n            <div className=\"rounded-md border p-4 space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"h-3 w-3 rounded-full bg-blue-500\" />\n                <h4 className=\"font-medium\">Dijkstra Algorithm</h4>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                Guarantees shortest path. Ideal for static traffic conditions.\n              </p>\n              <div className=\"grid grid-cols-2 gap-3 pt-2\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Avg Distance</p>\n                  <p className=\"text-sm font-mono font-medium\">41.2 km</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Avg Time</p>\n                  <p className=\"text-sm font-mono font-medium\">65 min</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"rounded-md border p-4 space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"h-3 w-3 rounded-full bg-purple-500\" />\n                <h4 className=\"font-medium\">A* Algorithm</h4>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                Faster computation. Uses heuristics for real-time optimization.\n              </p>\n              <div className=\"grid grid-cols-2 gap-3 pt-2\">\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Avg Distance</p>\n                  <p className=\"text-sm font-mono font-medium\">43.8 km</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-muted-foreground\">Avg Time</p>\n                  <p className=\"text-sm font-mono font-medium\">71 min</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n      <OptimizeRouteDialog open={optimizeOpen} onOpenChange={setOptimizeOpen} />\n    </div>\n  );\n}\n","size_bytes":11842},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"server/pathfinding.ts":{"content":"/**\n * Route Optimization Algorithms: Dijkstra's and A*\n */\n\nexport interface Coordinate {\n  lat: number;\n  lng: number;\n  address?: string;\n}\n\nexport interface RoutePoint {\n  coord: Coordinate;\n  index: number;\n}\n\n// Calculate great circle distance between two coordinates (in km)\nfunction haversineDistance(coord1: Coordinate, coord2: Coordinate): number {\n  const R = 6371; // Earth's radius in km\n  const dLat = (coord2.lat - coord1.lat) * (Math.PI / 180);\n  const dLng = (coord2.lng - coord1.lng) * (Math.PI / 180);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(coord1.lat * (Math.PI / 180)) *\n      Math.cos(coord2.lat * (Math.PI / 180)) *\n      Math.sin(dLng / 2) *\n      Math.sin(dLng / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\n\n// Estimate time from distance (minutes)\nfunction estimateTime(distanceKm: number): number {\n  const avgSpeed = 50; // km/h\n  return (distanceKm / avgSpeed) * 60; // minutes\n}\n\n/**\n * Dijkstra's Algorithm for shortest path\n */\nexport function dijkstraOptimize(waypoints: Coordinate[]): {\n  path: number[];\n  totalDistance: number;\n  estimatedDuration: number;\n  coordinates: [number, number][];\n} {\n  const n = waypoints.length;\n  if (n <= 1) {\n    return {\n      path: waypoints.map((_, i) => i),\n      totalDistance: 0,\n      estimatedDuration: 0,\n      coordinates: waypoints.map((w) => [w.lat, w.lng]),\n    };\n  }\n\n  // Build distance matrix\n  const distances: number[][] = Array(n)\n    .fill(null)\n    .map(() => Array(n).fill(0));\n  for (let i = 0; i < n; i++) {\n    for (let j = 0; j < n; j++) {\n      if (i !== j) {\n        distances[i][j] = haversineDistance(waypoints[i], waypoints[j]);\n      }\n    }\n  }\n\n  // Nearest neighbor heuristic (simplified Dijkstra for waypoints)\n  const visited = new Set<number>();\n  const path: number[] = [0];\n  visited.add(0);\n  let totalDistance = 0;\n\n  while (visited.size < n) {\n    const current = path[path.length - 1];\n    let nearest = -1;\n    let minDist = Infinity;\n\n    for (let i = 0; i < n; i++) {\n      if (!visited.has(i) && distances[current][i] < minDist) {\n        minDist = distances[current][i];\n        nearest = i;\n      }\n    }\n\n    if (nearest !== -1) {\n      path.push(nearest);\n      visited.add(nearest);\n      totalDistance += minDist;\n    }\n  }\n\n  const coordinates = path.map((i) => [waypoints[i].lat, waypoints[i].lng] as [number, number]);\n  const estimatedDuration = Math.round(estimateTime(totalDistance));\n\n  return {\n    path,\n    totalDistance: Math.round(totalDistance * 100) / 100,\n    estimatedDuration,\n    coordinates,\n  };\n}\n\n/**\n * A* Algorithm for optimized pathfinding\n */\nexport function astarOptimize(waypoints: Coordinate[]): {\n  path: number[];\n  totalDistance: number;\n  estimatedDuration: number;\n  coordinates: [number, number][];\n} {\n  const n = waypoints.length;\n  if (n <= 1) {\n    return {\n      path: waypoints.map((_, i) => i),\n      totalDistance: 0,\n      estimatedDuration: 0,\n      coordinates: waypoints.map((w) => [w.lat, w.lng]),\n    };\n  }\n\n  // Calculate centroid for heuristic\n  const centroid = {\n    lat: waypoints.reduce((sum, w) => sum + w.lat, 0) / n,\n    lng: waypoints.reduce((sum, w) => sum + w.lng, 0) / n,\n  };\n\n  // Distance matrix\n  const distances: number[][] = Array(n)\n    .fill(null)\n    .map(() => Array(n).fill(0));\n  for (let i = 0; i < n; i++) {\n    for (let j = 0; j < n; j++) {\n      if (i !== j) {\n        distances[i][j] = haversineDistance(waypoints[i], waypoints[j]);\n      }\n    }\n  }\n\n  // A* with priority queue (simplified)\n  const openSet = new Set<number>([0]);\n  const cameFrom = new Map<number, number>();\n  const gScore = new Map<number, number>();\n  const fScore = new Map<number, number>();\n\n  for (let i = 0; i < n; i++) {\n    gScore.set(i, Infinity);\n    fScore.set(i, Infinity);\n  }\n\n  gScore.set(0, 0);\n  fScore.set(0, haversineDistance(waypoints[0], centroid));\n\n  while (openSet.size > 0) {\n    let current = -1;\n    let minF = Infinity;\n    for (const node of Array.from(openSet)) {\n      const f = fScore.get(node) || Infinity;\n      if (f < minF) {\n        minF = f;\n        current = node;\n      }\n    }\n\n    if (current === -1) break;\n\n    if (openSet.size === 1) {\n      break;\n    }\n\n    openSet.delete(current);\n\n    for (let neighbor = 0; neighbor < n; neighbor++) {\n      if (neighbor === current) continue;\n\n      const tentativeGScore = (gScore.get(current) || Infinity) + distances[current][neighbor];\n      if (tentativeGScore < (gScore.get(neighbor) || Infinity)) {\n        cameFrom.set(neighbor, current);\n        gScore.set(neighbor, tentativeGScore);\n        const heuristic = haversineDistance(waypoints[neighbor], centroid);\n        fScore.set(neighbor, tentativeGScore + heuristic);\n        openSet.add(neighbor);\n      }\n    }\n  }\n\n  // Reconstruct path\n  const path: number[] = [];\n  const visited = new Set<number>();\n  let current = 0;\n  path.push(current);\n  visited.add(current);\n\n  while (visited.size < n) {\n    let nearest = -1;\n    let minDist = Infinity;\n    for (let i = 0; i < n; i++) {\n      if (!visited.has(i) && distances[current][i] < minDist) {\n        minDist = distances[current][i];\n        nearest = i;\n      }\n    }\n    if (nearest === -1) break;\n    path.push(nearest);\n    visited.add(nearest);\n    current = nearest;\n  }\n\n  let totalDistance = 0;\n  for (let i = 0; i < path.length - 1; i++) {\n    totalDistance += distances[path[i]][path[i + 1]];\n  }\n\n  const coordinates = path.map((i) => [waypoints[i].lat, waypoints[i].lng] as [number, number]);\n  const estimatedDuration = Math.round(estimateTime(totalDistance));\n\n  return {\n    path,\n    totalDistance: Math.round(totalDistance * 100) / 100,\n    estimatedDuration,\n    coordinates,\n  };\n}\n\n/**\n * Optimize route with specified algorithm\n */\nexport function optimizeRoute(\n  waypoints: Coordinate[],\n  algorithm: \"dijkstra\" | \"astar\" = \"dijkstra\"\n) {\n  if (algorithm === \"astar\") {\n    return astarOptimize(waypoints);\n  }\n  return dijkstraOptimize(waypoints);\n}\n","size_bytes":6022},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"replit.md":{"content":"# Smart Delivery System - Route Optimization & Tracking\n\n## Overview\n\nThis is an enterprise logistics dashboard for smart route optimization, real-time vehicle tracking, and delivery management with IoT integration. The system provides fleet managers and dispatchers with comprehensive tools to monitor vehicles, optimize delivery routes, track packages, analyze performance metrics, and receive real-time alerts about fleet operations.\n\nThe application enables:\n- Real-time vehicle tracking with GPS coordinates\n- Smart route optimization using pathfinding algorithms (Dijkstra, A*)\n- Delivery scheduling and status management\n- IoT sensor monitoring (fuel levels, temperature, engine status)\n- Alert system for critical events\n- Analytics dashboard with delivery trends and cost analysis\n- Interactive map visualization with Leaflet\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## Driver View & GPS Integration\n\nThe system includes a mobile-friendly **Driver View** page where drivers can enable GPS tracking:\n\n- **Route**: `/driver` (mobile-optimized)\n- **Features**:\n  - Real phone GPS integration using Geolocation API\n  - Live GPS coordinate display (latitude, longitude)\n  - Automatic location updates sent to dashboard\n  - Route completion tracking\n  - Vehicle status monitoring (fuel, speed, etc.)\n  \n**How to Test on Real Phone**:\n1. Open Driver View URL on your phone: `https://your-app.replit.dev/driver`\n2. Grant location permission (uses real phone GPS)\n3. Click \"Start Driving\" to begin tracking\n4. Go to dashboard (`/map`) on desktop to see live location updates\n5. Driver location appears as blue truck icon and updates every 3 seconds\n\nSee `GPS_DRIVER_SETUP.md` for complete setup guide and troubleshooting.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React with TypeScript using Vite as the build tool\n\n**UI Component System**: shadcn/ui components built on Radix UI primitives with Tailwind CSS for styling. The design follows Material Design principles with Linear-inspired clean typography, using Inter for UI elements and JetBrains Mono for technical data (GPS coordinates, timestamps).\n\n**State Management**: \n- TanStack Query (React Query) for server state management with automatic caching and real-time updates\n- WebSocket integration for live vehicle position updates and sensor data streaming\n- Client-side routing via Wouter (lightweight alternative to React Router)\n\n**Design System**:\n- Consistent spacing using Tailwind's scale (p-4, gap-6, m-8)\n- 12-column grid layout with fixed sidebar navigation\n- Theme support (light/dark mode) via CSS variables\n- Responsive breakpoints for mobile, tablet, and desktop\n\n**Key Pages**:\n- Dashboard: Overview metrics and recent activity\n- Live Map: Real-time vehicle tracking with Leaflet maps\n- Vehicles: Fleet management and status monitoring\n- Deliveries: Package tracking and scheduling\n- Routes: Route optimization and algorithm selection\n- Analytics: Charts showing delivery trends and cost analysis\n- Alerts: Critical notifications and warnings\n- IoT Sensors: Real-time sensor data from vehicle telemetry\n\n### Backend Architecture\n\n**Framework**: Express.js with TypeScript running on Node.js\n\n**API Design**: RESTful API with WebSocket support for real-time updates\n- `/api/metrics` - Dashboard statistics\n- `/api/vehicles` - Vehicle CRUD operations\n- `/api/deliveries` - Delivery management\n- `/api/routes` - Route optimization\n- `/api/alerts` - Alert system\n- `/api/iot/sensors` - IoT sensor data\n- `/ws` - WebSocket endpoint for live updates\n\n**Data Layer**: \n- In-memory storage implementation (`MemStorage`) for development/testing\n- Drizzle ORM configured for PostgreSQL production use\n- Schema-first approach with Zod validation via `drizzle-zod`\n\n**Real-time Communication**:\n- WebSocket server for pushing vehicle position updates, sensor readings, and alerts to connected clients\n- Automatic query invalidation on the client when server pushes updates\n\n**Development vs Production**:\n- Development: Vite dev server with HMR middleware integrated into Express\n- Production: Static file serving of pre-built client bundle\n\n### Data Storage\n\n**ORM**: Drizzle ORM with PostgreSQL dialect\n\n**Database Schema** (defined in `shared/schema.ts`):\n\n1. **Users Table**: Authentication and role-based access (driver, dispatcher, admin)\n2. **Vehicles Table**: Fleet information with real-time GPS coordinates, speed, fuel level, temperature, status (idle, in-transit, maintenance), and current route assignment\n3. **Deliveries Table**: Package tracking with pickup/delivery locations, customer details, assigned vehicle/route, scheduling information, priority levels, and status tracking\n4. **Routes Table**: Optimized paths with algorithm selection (Dijkstra, A*), waypoints as JSON arrays, distance/duration estimates, fuel cost calculations, and completion status\n5. **Alerts Table**: Notification system with severity levels (info, warning, critical), alert types (delivery delay, fuel low, maintenance required), and read/unread status\n6. **IoT Sensor Data Table**: Telemetry from vehicle devices including GPS coordinates, fuel percentage, engine temperature, battery voltage, speed, engine status, and connection health\n\n**Schema Features**:\n- UUID primary keys with auto-generation via PostgreSQL's `gen_random_uuid()`\n- Timestamp tracking with `defaultNow()`\n- Real numbers for precise GPS coordinates and measurements\n- JSON fields for flexible data storage (route waypoints, sensor metadata)\n- Foreign key relationships between vehicles, deliveries, and routes\n\n### External Dependencies\n\n**Third-party Services & APIs**:\n- **Neon Database** (`@neondatabase/serverless`): Serverless PostgreSQL database hosting\n- **Leaflet**: Interactive mapping library for vehicle tracking visualization\n- **Recharts**: Charting library for analytics dashboards\n- **WebSocket Protocol**: For real-time bidirectional communication\n\n**Key Libraries**:\n- **shadcn/ui + Radix UI**: Complete component library for forms, dialogs, dropdowns, etc.\n- **TanStack Query**: Server state management with caching\n- **React Hook Form + Zod**: Form validation and management\n- **date-fns**: Date/time formatting and manipulation\n- **Wouter**: Lightweight client-side routing\n- **Tailwind CSS**: Utility-first CSS framework\n- **TypeScript**: Type safety across full stack\n\n**Development Tools**:\n- **Vite**: Fast development server and build tool\n- **Drizzle Kit**: Database migration management\n- **ESBuild**: Production server bundling\n- **TSX**: TypeScript execution for development server\n\n**Session Management**:\n- `connect-pg-simple`: PostgreSQL-backed session store for Express\n- Session data persisted in database for scalability\n\n**Route Optimization Algorithms** (referenced in design):\n- Dijkstra's algorithm for shortest path calculation\n- A* algorithm for heuristic-based pathfinding\n- Real-time route updates based on traffic and conditions\n- Machine learning integration for demand prediction and cost estimation (planned)","size_bytes":7052},"client/src/components/theme-toggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"./theme-provider\";\n\nexport function ThemeToggle() {\n  const { theme, setTheme } = useTheme();\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}\n      data-testid=\"button-theme-toggle\"\n    >\n      <Sun className=\"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n      <Moon className=\"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n      <span className=\"sr-only\">Toggle theme</span>\n    </Button>\n  );\n}\n","size_bytes":666},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/lib/format-time.ts":{"content":"/**\n * Format date/time to Indian Standard Time (IST, UTC+5:30)\n * Returns format: \"24 Nov 2025 08:30:45 AM\"\n */\nexport function formatIST(date: Date | string | null | undefined, includeTime = true): string {\n  if (!date) return \"-\";\n  \n  const dateObj = typeof date === \"string\" ? new Date(date) : date;\n  if (isNaN(dateObj.getTime())) return \"-\";\n  \n  // Convert to IST using Intl API for accurate timezone handling\n  const istFormatter = new Intl.DateTimeFormat(\"en-IN\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"2-digit\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n    timeZone: \"Asia/Kolkata\",\n  });\n\n  if (!includeTime) {\n    const parts = istFormatter.formatToParts(dateObj);\n    const date = parts.find((p) => p.type === \"day\")?.value || \"\";\n    const month = parts.find((p) => p.type === \"month\")?.value || \"\";\n    const year = parts.find((p) => p.type === \"year\")?.value || \"\";\n    return `${date} ${month} ${year}`;\n  }\n\n  // Format: \"24 Nov 2025 08:30:45 AM\"\n  const formatted = istFormatter.format(dateObj);\n  // The format from Intl is: \"24/11/2025, 08:30:45 am\"\n  // We need to convert it to: \"24 Nov 2025 08:30:45 AM\"\n  \n  const parts = istFormatter.formatToParts(dateObj);\n  const day = parts.find((p) => p.type === \"day\")?.value || \"\";\n  const month = parts.find((p) => p.type === \"month\")?.value || \"\";\n  const year = parts.find((p) => p.type === \"year\")?.value || \"\";\n  const hour = parts.find((p) => p.type === \"hour\")?.value || \"\";\n  const minute = parts.find((p) => p.type === \"minute\")?.value || \"\";\n  const second = parts.find((p) => p.type === \"second\")?.value || \"\";\n  const ampm = parts.find((p) => p.type === \"dayPeriod\")?.value?.toUpperCase() || \"\";\n\n  return `${day} ${month} ${year} ${hour}:${minute}:${second} ${ampm}`;\n}\n\n/**\n * Format only time to IST\n * Returns format: \"08:30:45 AM\"\n */\nexport function formatISTTime(date: Date | string | null | undefined): string {\n  if (!date) return \"-\";\n  \n  const dateObj = typeof date === \"string\" ? new Date(date) : date;\n  if (isNaN(dateObj.getTime())) return \"-\";\n  \n  const istFormatter = new Intl.DateTimeFormat(\"en-IN\", {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n    timeZone: \"Asia/Kolkata\",\n  });\n\n  const parts = istFormatter.formatToParts(dateObj);\n  const hour = parts.find((p) => p.type === \"hour\")?.value || \"\";\n  const minute = parts.find((p) => p.type === \"minute\")?.value || \"\";\n  const second = parts.find((p) => p.type === \"second\")?.value || \"\";\n  const ampm = parts.find((p) => p.type === \"dayPeriod\")?.value?.toUpperCase() || \"\";\n\n  return `${hour}:${minute}:${second} ${ampm}`;\n}\n\n/**\n * Format only date to IST\n * Returns format: \"24 Nov 2025\"\n */\nexport function formatISTDate(date: Date | string | null | undefined): string {\n  if (!date) return \"-\";\n  \n  const dateObj = typeof date === \"string\" ? new Date(date) : date;\n  if (isNaN(dateObj.getTime())) return \"-\";\n  \n  const istFormatter = new Intl.DateTimeFormat(\"en-IN\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"2-digit\",\n    timeZone: \"Asia/Kolkata\",\n  });\n\n  const parts = istFormatter.formatToParts(dateObj);\n  const day = parts.find((p) => p.type === \"day\")?.value || \"\";\n  const month = parts.find((p) => p.type === \"month\")?.value || \"\";\n  const year = parts.find((p) => p.type === \"year\")?.value || \"\";\n\n  return `${day} ${month} ${year}`;\n}\n","size_bytes":3414}},"version":2}